(()=>{var e={};e.id=5812,e.ids=[5812],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},25369:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(3391),r(95540),r(15334),r(26083),r(19644),r(96560);var t=r(23191),a=r(88716),n=r(37922),o=r.n(n),i=r(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let c=["",{children:["(account)",{children:["account",{children:["addresses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3391)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\account\\addresses\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,95540)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,15334)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,19644)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\not-found.tsx"]}],l=["D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\account\\addresses\\page.tsx"],u="/(account)/account/addresses/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(account)/account/addresses/page",pathname:"/account/addresses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50792:(e,s,r)=>{Promise.resolve().then(r.bind(r,94874))},94874:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p,dynamic:()=>m});var t=r(10326),a=r(17577),n=r(74723),o=r(71473),i=r(79618),d=r(24918),c=r(59575),l=r(40381),u=r(61962);let m="force-dynamic";function p(){let[e,s]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[y,f]=(0,a.useState)(!1),{register:b,handleSubmit:N,reset:j,formState:{errors:v}}=(0,n.cI)({mode:"onSubmit",reValidateMode:"onChange",defaultValues:{country:"Việt Nam",isDefault:!1,type:"both"}}),E=async r=>{f(!0);try{if(g){let t=await (0,u.y3)(g,r);s(e.map(e=>e.id===g?t:e)),l.ZP.success("Cập nhật địa chỉ th\xe0nh c\xf4ng!")}else{let t=await (0,u.p6)(r);s([...e,t]),l.ZP.success("Th\xeam địa chỉ th\xe0nh c\xf4ng!")}j({country:"Việt Nam",isDefault:!1,type:"both"}),h(!1),x(null)}catch(s){console.error("[AddressesPage] ========== FORM SUBMIT ERROR =========="),console.error("[AddressesPage] Save address error:",s),console.error("[AddressesPage] Error details:",{message:s?.message,response:s?.response?.data,status:s?.response?.status,url:s?.config?.url,baseURL:s?.config?.baseURL});let e="C\xf3 lỗi xảy ra. Vui l\xf2ng thử lại.";s?.response?.data?s.response.data.error?"string"==typeof s.response.data.error?e=s.response.data.error:s.response.data.error.message&&(e=s.response.data.error.message):s.response.data.message?e=s.response.data.message:"string"==typeof s.response.data&&(e=s.response.data):s?.message&&(e=s.message),s?.code==="ERR_NETWORK"||s?.message==="Network Error"?e="Kh\xf4ng thể kết nối đến server. Vui l\xf2ng kiểm tra xem backend server đ\xe3 chạy chưa.":s?.code==="ERR_CONNECTION_REFUSED"?e="Kết nối bị từ chối. Vui l\xf2ng kiểm tra xem backend server đ\xe3 chạy chưa.":s?.response?.status===401?e="Vui l\xf2ng đăng nhập để th\xeam địa chỉ":s?.response?.status===500?e=s?.response?.data?.error?`Lỗi server: ${s.response.data.error}`:"Lỗi server khi th\xeam địa chỉ. Vui l\xf2ng kiểm tra lại th\xf4ng tin v\xe0 thử lại.":s?.response?.status===400?e=e||"Dữ liệu kh\xf4ng hợp lệ. Vui l\xf2ng kiểm tra lại th\xf4ng tin.":s?.response?.status===404&&(e="API endpoint kh\xf4ng tồn tại. Vui l\xf2ng li\xean hệ hỗ trợ."),console.error("[AddressesPage] Final error message:",e),console.error("[AddressesPage] Error code:",s?.code),console.error("[AddressesPage] Full error:",s),l.ZP.error(e)}finally{f(!1)}},R=e=>{j(e),x(e.id),h(!0)},P=async r=>{if(confirm("Bạn c\xf3 chắc chắn muốn x\xf3a địa chỉ n\xe0y?"))try{await (0,u._N)(r),s(e.filter(e=>e.id!==r)),l.ZP.success("X\xf3a địa chỉ th\xe0nh c\xf4ng!")}catch(s){console.error("Delete address error:",s);let e=s?.response?.data?.message||s?.message||"X\xf3a địa chỉ thất bại. Vui l\xf2ng thử lại.";l.ZP.error(e)}};return r?t.jsx("div",{className:"card p-6",children:t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-purple-600 border-t-transparent"})})}):(0,t.jsxs)("div",{children:[t.jsx(c.Z,{items:[{label:"Trang chủ",href:"/"},{label:"T\xe0i khoản",href:"/account"},{label:"Địa chỉ",href:"/account/addresses"}],className:"mb-6"}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Địa chỉ của t\xf4i"}),!p&&(0,t.jsxs)(i.Z,{onClick:()=>h(!0),children:[t.jsx(o.OvN,{className:"mr-2 h-4 w-4"}),"Th\xeam địa chỉ mới"]})]}),p&&(0,t.jsxs)("div",{className:"mb-8 rounded-lg border border-gray-200 bg-gray-50 p-6",children:[t.jsx("h2",{className:"mb-6 text-xl font-semibold text-gray-900",children:g?"Chỉnh sửa địa chỉ":"Th\xeam địa chỉ mới"}),(0,t.jsxs)("form",{onSubmit:N(E,e=>{console.error("[AddressesPage] ========== VALIDATION ERRORS =========="),console.error("[AddressesPage] Form validation errors:",e),console.error("[AddressesPage] Form has errors, cannot submit");let s=Object.values(e)[0];s?.message?l.ZP.error(s.message):l.ZP.error("Vui l\xf2ng điền đầy đủ th\xf4ng tin bắt buộc")}),className:"space-y-4",noValidate:!0,children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(d.Z,{label:"Họ",type:"text",error:v.lastName?.message,required:!0,...b("lastName",{required:"Họ l\xe0 bắt buộc"})}),t.jsx(d.Z,{label:"T\xean",type:"text",error:v.firstName?.message,required:!0,...b("firstName",{required:"T\xean l\xe0 bắt buộc"})})]}),t.jsx(d.Z,{label:"C\xf4ng ty (t\xf9y chọn)",type:"text",...b("company")}),t.jsx(d.Z,{label:"Địa chỉ",type:"text",error:v.addressLine1?.message,required:!0,...b("addressLine1",{required:"Địa chỉ l\xe0 bắt buộc"})}),t.jsx(d.Z,{label:"Địa chỉ 2 (t\xf9y chọn)",type:"text",...b("addressLine2")}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[t.jsx(d.Z,{label:"Th\xe0nh phố",type:"text",error:v.city?.message,required:!0,...b("city",{required:"Th\xe0nh phố l\xe0 bắt buộc"})}),t.jsx(d.Z,{label:"Tỉnh/Th\xe0nh",type:"text",error:v.state?.message,required:!0,...b("state",{required:"Tỉnh/Th\xe0nh l\xe0 bắt buộc"})}),t.jsx(d.Z,{label:"M\xe3 bưu điện",type:"text",error:v.postalCode?.message,required:!0,...b("postalCode",{required:"M\xe3 bưu điện l\xe0 bắt buộc"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx(d.Z,{label:"Quốc gia",type:"text",error:v.country?.message,required:!0,...b("country",{required:"Quốc gia l\xe0 bắt buộc"})}),t.jsx(d.Z,{label:"Số điện thoại",type:"tel",error:v.phone?.message,required:!0,...b("phone",{required:"Số điện thoại l\xe0 bắt buộc"})})]}),t.jsx("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",...b("isDefault"),className:"mr-2 h-4 w-4 rounded border-gray-300 text-brand-purple-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Đặt l\xe0m địa chỉ mặc định"})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[t.jsx(i.Z,{type:"button",variant:"outline",onClick:()=>{h(!1),x(null),j()},children:"Hủy"}),(0,t.jsxs)(i.Z,{type:"submit",isLoading:y,disabled:y,children:[t.jsx(o.UgA,{className:"mr-2 h-4 w-4"}),g?"Cập nhật":"Th\xeam địa chỉ"]})]})]})]}),0===e.length?(0,t.jsxs)("div",{className:"py-12 text-center",children:[t.jsx(o.i63,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),t.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"Chưa c\xf3 địa chỉ n\xe0o"}),t.jsx("p",{className:"mb-6 text-gray-600",children:"Th\xeam địa chỉ để đơn h\xe0ng được giao nhanh ch\xf3ng hơn."}),(0,t.jsxs)(i.Z,{onClick:()=>h(!0),children:[t.jsx(o.OvN,{className:"mr-2 h-4 w-4"}),"Th\xeam địa chỉ đầu ti\xean"]})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:e.map(e=>(0,t.jsxs)("div",{className:`rounded-lg border-2 p-6 ${e.isDefault?"border-brand-purple-600 bg-purple-50":"border-gray-200 bg-white"}`,children:[(0,t.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(o.i63,{className:"h-5 w-5 text-brand-purple-600"}),e.isDefault&&t.jsx("span",{className:"rounded-full bg-brand-purple-600 px-2 py-1 text-xs font-semibold text-white",children:"Mặc định"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>R(e),className:"rounded-lg p-2 text-gray-600 hover:bg-gray-100",children:t.jsx(o.vPQ,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>P(e.id),className:"rounded-lg p-2 text-red-600 hover:bg-red-50",children:t.jsx(o.Ybf,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-gray-700",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e.lastName," ",e.firstName]}),e.company&&t.jsx("p",{children:e.company}),t.jsx("p",{children:e.addressLine1}),e.addressLine2&&t.jsx("p",{children:e.addressLine2}),(0,t.jsxs)("p",{children:[e.city,", ",e.state," ",e.postalCode]}),t.jsx("p",{children:e.country}),t.jsx("p",{className:"mt-2",children:e.phone})]})]},e.id))})]})]})}},24918:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(10326),a=r(17577),n=r(82146);let o=(0,a.forwardRef)(({label:e,error:s,helperText:r,leftIcon:o,rightIcon:i,className:d,id:c,required:l,...u},m)=>{let p=(0,a.useId)(),h=c??p;return(0,t.jsxs)("div",{className:"w-full",children:[e&&(0,t.jsxs)("label",{htmlFor:h,className:"mb-1.5 block text-sm font-medium text-gray-700",children:[e,l&&t.jsx("span",{className:"ml-1 text-error",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[o&&t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:o}),t.jsx("input",{ref:m,id:h,className:(0,n.cn)("input",s&&"input-error",o&&"pl-10",i&&"pr-10",d),required:l,...u}),i&&t.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400",children:i})]}),s&&t.jsx("p",{className:"mt-1.5 text-sm text-error",children:s}),r&&!s&&t.jsx("p",{className:"mt-1.5 text-sm text-gray-500",children:r})]})});o.displayName="Input";let i=o},61962:(e,s,r)=>{"use strict";r.d(s,{_N:()=>c,p6:()=>i,y3:()=>d});var t=r(59341),a=r(51856);let n=e=>{let s={first_name:e.firstName?.trim()||"",last_name:e.lastName?.trim()||"",address_line1:e.addressLine1?.trim()||"",city:e.city?.trim()||"",state:e.state?.trim()||"",postal_code:e.postalCode?.trim()||"",country:e.country?.trim()||"",phone:e.phone?.trim()||"",is_default:void 0!==e.isDefault&&e.isDefault,type:e.type||"both"};return e.company&&e.company.trim()&&(s.company=e.company.trim()),e.addressLine2&&e.addressLine2.trim()&&(s.address_line2=e.addressLine2.trim()),s},o=e=>({id:e.id||"",userId:e.user_id||e.userId||"",firstName:e.first_name||e.firstName||"",lastName:e.last_name||e.lastName||"",company:e.company,addressLine1:e.address_line1||e.addressLine1||"",addressLine2:e.address_line2||e.addressLine2,city:e.city||"",state:e.state||"",postalCode:e.postal_code||e.postalCode||"",country:e.country||"",phone:e.phone||"",isDefault:void 0!==e.is_default?e.is_default:void 0!==e.isDefault&&e.isDefault,type:e.type||"both"}),i=async e=>{try{let s=n(e),r=["first_name","last_name","address_line1","city","state","postal_code","country","phone"].filter(e=>!s[e]||""===s[e].trim());if(r.length>0)throw console.error("[createAddress] Missing required fields:",r),Error(`Missing required fields: ${r.join(", ")}`);let i=await t.Z.post(a.P.USER.ADD_ADDRESS,s);return o(i.data.data)}catch(e){if(console.error("[createAddress] ========== ADDRESS CREATION ERROR =========="),console.error("[createAddress] Error:",e),console.error("[createAddress] Error code:",e?.code),console.error("[createAddress] Error details:",{message:e?.message,code:e?.code,response:e?.response?.data,status:e?.response?.status,statusText:e?.response?.statusText,url:e?.config?.url,baseURL:e?.config?.baseURL,fullURL:e?.config?.baseURL+e?.config?.url,requestData:e?.config?.data,requestDataString:e?.config?.data?JSON.stringify(e.config.data):null,headers:e?.config?.headers}),(e?.code==="ERR_NETWORK"||e?.code==="ERR_CONNECTION_REFUSED"||e?.message==="Network Error")&&(console.error("[createAddress] ⚠️ NETWORK ERROR - Backend server may not be running"),console.error("[createAddress] API URL:",t.Z.defaults.baseURL),console.error("[createAddress] Full URL:",t.Z.defaults.baseURL+a.P.USER.ADD_ADDRESS),console.error("[createAddress] Please check if backend server is running")),e?.response?.data&&(console.error("[createAddress] Response body:",e.response.data),console.error("[createAddress] Response body stringified:",JSON.stringify(e.response.data))),e?.config?.data)try{let s="string"==typeof e.config.data?JSON.parse(e.config.data):e.config.data;console.error("[createAddress] Request payload that failed:",s)}catch(s){console.error("[createAddress] Could not parse request data:",e.config.data)}throw e}},d=async(e,s)=>{try{let r=n(s),i=["first_name","last_name","address_line1","city","state","postal_code","country","phone"].filter(e=>!r[e]||""===r[e].trim());if(i.length>0)throw console.error("[updateAddress] Missing required fields:",i),Error(`Missing required fields: ${i.join(", ")}`);let d=await t.Z.put(a.P.USER.UPDATE_ADDRESS(e),r);return o(d.data.data)}catch(e){throw console.error("[updateAddress] ========== ADDRESS UPDATE ERROR =========="),console.error("[updateAddress] Error:",e),console.error("[updateAddress] Error details:",{message:e?.message,response:e?.response?.data,status:e?.response?.status,url:e?.config?.url,baseURL:e?.config?.baseURL,requestData:e?.config?.data,headers:e?.config?.headers}),e}},c=async e=>{await t.Z.delete(a.P.USER.DELETE_ADDRESS(e))}},3391:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n,dynamic:()=>a});var t=r(68570);let a=(0,t.createProxy)(String.raw`D:\PROJECT\Cursor\Banyco v2\Ecommerce\frontend\app\(account)\account\addresses\page.tsx#dynamic`),n=(0,t.createProxy)(String.raw`D:\PROJECT\Cursor\Banyco v2\Ecommerce\frontend\app\(account)\account\addresses\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[6853,9024,6385,2975,5604,6287],()=>r(25369));module.exports=t})();