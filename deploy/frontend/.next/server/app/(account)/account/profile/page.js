(()=>{var e={};e.id=7017,e.ids=[7017],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},62052:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>m,routeModule:()=>u,tree:()=>c}),t(62965),t(95540),t(15334),t(26083),t(19644),t(96560);var a=t(23191),s=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let c=["",{children:["(account)",{children:["account",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,62965)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\account\\profile\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,95540)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15334)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,26083)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,19644)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\not-found.tsx"]}],m=["D:\\PROJECT\\Cursor\\Banyco v2\\Ecommerce\\frontend\\app\\(account)\\account\\profile\\page.tsx"],d="/(account)/account/profile/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(account)/account/profile/page",pathname:"/account/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},17517:(e,r,t)=>{Promise.resolve().then(t.bind(t,94255))},94255:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g,dynamic:()=>x});var a=t(10326),s=t(17577),n=t(74723),o=t(71473),i=t(79618),l=t(24918),c=t(59575),m=t(69822),d=t(59341),p=t(51856);let u=e=>{if(e.firstName||e.lastName)return{firstName:e.firstName||"",lastName:e.lastName||""};if(e.name){let r=e.name.trim().split(/\s+/);if(r.length>=2)return{lastName:r[0],firstName:r.slice(1).join(" ")};if(1===r.length)return{firstName:r[0],lastName:""}}return{firstName:"",lastName:""}},h=async e=>{try{let r={email:e.email};e.name?r.name=e.name:(e.firstName||e.lastName)&&(r.firstName=e.firstName,r.lastName=e.lastName),void 0!==e.phone&&null!==e.phone?r.phone=e.phone.trim()||null:""===e.phone&&(r.phone=null),void 0!==e.avatar&&(r.avatar=e.avatar);let t=(await d.Z.put(p.P.USER.UPDATE_PROFILE,r)).data.data,{firstName:a,lastName:s}=u(t);t.name&&!t.firstName&&t.lastName;let n=t.phone;return!n&&e.phone?(console.warn("[updateUserProfile] ⚠️ Backend did not return phone, using phone from request:",e.phone),n=e.phone.trim()||void 0):!n&&r.phone&&(console.warn("[updateUserProfile] ⚠️ Backend did not return phone, using phone from request payload:",r.phone),n=null===r.phone?void 0:r.phone),{id:t.id,email:t.email,firstName:a,lastName:s,phone:n||void 0,avatar:t.avatar,role:t.role,emailVerified:t.emailVerified,createdAt:t.createdAt,updatedAt:t.updatedAt}}catch(e){throw console.error("[updateUserProfile] Error:",e),console.error("[updateUserProfile] Error details:",{message:e?.message,response:e?.response?.data,status:e?.response?.status,url:e?.config?.url,baseURL:e?.config?.baseURL,requestData:e?.config?.data}),e}};var f=t(40381);let x="force-dynamic";function g(){let{user:e,updateUser:r}=(0,m.t)(),[t,d]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),{register:x,handleSubmit:g,reset:N,formState:{errors:v}}=(0,n.cI)({defaultValues:{fullName:e?.lastName&&e?.firstName?`${e.lastName} ${e.firstName}`.trim():e?.firstName||e?.lastName||"",email:e?.email||"",phone:""}}),b=async e=>{u(!0);try{let t={name:e.fullName.trim(),email:e.email,phone:e.phone?e.phone.trim():void 0},a=await h(t);r({firstName:a.firstName,lastName:a.lastName,email:a.email,phone:a.phone});let s=a.lastName&&a.firstName?`${a.lastName} ${a.firstName}`.trim():a.firstName||a.lastName||"";N({fullName:s,email:a.email,phone:a.phone||""}),f.ZP.success("Cập nhật th\xf4ng tin th\xe0nh c\xf4ng!")}catch(r){console.error("[Profile] ========== PROFILE UPDATE ERROR =========="),console.error("[Profile] Update profile error:",r),console.error("[Profile] Error details:",{message:r?.message,response:r?.response?.data,status:r?.response?.status,url:r?.config?.url,baseURL:r?.config?.baseURL,requestData:r?.config?.data});let e="Cập nhật thất bại. Vui l\xf2ng thử lại.";r?.response?.data?r.response.data.message?e=r.response.data.message:r.response.data.error?e=r.response.data.error.message||r.response.data.error:"string"==typeof r.response.data&&(e=r.response.data):r?.message&&(e=r.message),f.ZP.error(e)}finally{u(!1)}};return t?a.jsx("div",{className:"card p-6",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-purple-600 border-t-transparent"})})}):(0,a.jsxs)("div",{children:[a.jsx(c.Z,{items:[{label:"Trang chủ",href:"/"},{label:"T\xe0i khoản",href:"/account"},{label:"Hồ sơ",href:"/account/profile"}],className:"mb-6"}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h1",{className:"mb-6 text-2xl font-bold text-gray-900",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsxs)("form",{onSubmit:g(b),className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 border-b border-gray-200 pb-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"h-24 w-24 overflow-hidden rounded-full bg-gray-200",children:e?.lastName||e?.firstName?(0,a.jsxs)("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-purple-500 to-pink-500 text-2xl font-bold text-white",children:[e.lastName?.[0]||"",e.firstName?.[0]||""]}):a.jsx(o.fzv,{className:"m-auto h-12 w-12 text-gray-400"})}),a.jsx("button",{type:"button",className:"absolute bottom-0 right-0 flex h-8 w-8 items-center justify-center rounded-full bg-brand-purple-600 text-white shadow-lg transition-colors hover:bg-brand-purple-700",children:a.jsx(o.tBf,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e?.lastName," ",e?.firstName]}),a.jsx("p",{className:"text-sm text-gray-600",children:e?.email}),a.jsx("button",{type:"button",className:"mt-2 text-sm text-brand-purple-600 hover:text-brand-purple-700",children:"Thay đổi ảnh đại diện"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsx(l.Z,{label:"Họ v\xe0 t\xean",type:"text",placeholder:"Nguyễn Văn A",leftIcon:a.jsx(o.fzv,{className:"h-5 w-5"}),error:v.fullName?.message,required:!0,...x("fullName",{required:"Họ v\xe0 t\xean l\xe0 bắt buộc",minLength:{value:2,message:"Họ v\xe0 t\xean phải c\xf3 \xedt nhất 2 k\xfd tự"}})}),a.jsx(l.Z,{label:"Email",type:"email",placeholder:"your.email@example.com",leftIcon:a.jsx(o.Imn,{className:"h-5 w-5"}),error:v.email?.message,required:!0,disabled:!0,...x("email",{required:"Email l\xe0 bắt buộc",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email kh\xf4ng hợp lệ"}})}),a.jsx(l.Z,{label:"Số điện thoại",type:"tel",placeholder:"0901234567",leftIcon:a.jsx(o.tUt,{className:"h-5 w-5"}),error:v.phone?.message,...x("phone",{pattern:{value:/^[0-9]{10,11}$/,message:"Số điện thoại kh\xf4ng hợp lệ"}})})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Đổi mật khẩu"}),(0,a.jsxs)("p",{className:"mb-4 text-sm text-gray-600",children:["Để đổi mật khẩu, vui l\xf2ng"," ",a.jsx("a",{href:"/forgot-password",className:"text-brand-purple-600 hover:underline",children:"click v\xe0o đ\xe2y"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4 border-t border-gray-200 pt-6",children:[a.jsx(i.Z,{href:"/account",variant:"outline",children:"Hủy"}),(0,a.jsxs)(i.Z,{type:"submit",isLoading:p,disabled:p,children:[a.jsx(o.mW3,{className:"mr-2 h-4 w-4"}),"Lưu thay đổi"]})]})]})]})]})}},24918:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var a=t(10326),s=t(17577),n=t(82146);let o=(0,s.forwardRef)(({label:e,error:r,helperText:t,leftIcon:o,rightIcon:i,className:l,id:c,required:m,...d},p)=>{let u=(0,s.useId)(),h=c??u;return(0,a.jsxs)("div",{className:"w-full",children:[e&&(0,a.jsxs)("label",{htmlFor:h,className:"mb-1.5 block text-sm font-medium text-gray-700",children:[e,m&&a.jsx("span",{className:"ml-1 text-error",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[o&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:o}),a.jsx("input",{ref:p,id:h,className:(0,n.cn)("input",r&&"input-error",o&&"pl-10",i&&"pr-10",l),required:m,...d}),i&&a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400",children:i})]}),r&&a.jsx("p",{className:"mt-1.5 text-sm text-error",children:r}),t&&!r&&a.jsx("p",{className:"mt-1.5 text-sm text-gray-500",children:t})]})});o.displayName="Input";let i=o},62965:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,dynamic:()=>s});var a=t(68570);let s=(0,a.createProxy)(String.raw`D:\PROJECT\Cursor\Banyco v2\Ecommerce\frontend\app\(account)\account\profile\page.tsx#dynamic`),n=(0,a.createProxy)(String.raw`D:\PROJECT\Cursor\Banyco v2\Ecommerce\frontend\app\(account)\account\profile\page.tsx#default`)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[6853,9024,6385,2975,5604,6287],()=>t(62052));module.exports=a})();