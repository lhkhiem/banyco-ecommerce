"use strict";exports.id=5604,exports.ids=[5604],exports.modules={10595:(e,t,a)=>{a.d(t,{default:()=>y});var r=a(10326),s=a(90434),i=a(46226),n=a(17577),l=a(34403),o=a(71473),c=a(94382),u=a(69822);function d({data:e,isOpen:t}){if(!t)return null;let a=e.columns.flatMap(e=>e.items);return r.jsx("div",{className:"absolute left-0 top-full z-50 pt-2",children:r.jsx("div",{className:"min-w-[220px] max-w-[280px] rounded-lg bg-white shadow-xl border border-gray-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:r.jsx("div",{className:"py-1.5",children:a.map((e,t)=>(0,r.jsxs)(s.default,{href:e.href,className:"block px-4 py-2.5 text-sm text-gray-700 hover:bg-red-50 hover:text-[#98131b] transition-all duration-200 relative group",children:[(0,r.jsxs)("span",{className:"relative z-10 flex items-center",children:[r.jsx("span",{className:"flex-1",children:e.title}),r.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.jsx("span",{className:"absolute left-0 top-0 bottom-0 w-1 bg-[#98131b] transform scale-y-0 group-hover:scale-y-100 transition-transform duration-200 origin-center"})]},e.id))})})})}var m=a(35047);a(36704);var p=a(60921),h=a(79721);function x({isOpen:e,onClose:t}){let[a,s]=(0,n.useState)(""),[i,l]=(0,n.useState)([]),[c,u]=(0,n.useState)(!1),[d,x]=(0,n.useState)(-1),g=(0,n.useRef)(null),f=(0,m.useRouter)(),b=(0,n.useCallback)(e=>{"ArrowDown"===e.key?(e.preventDefault(),x(e=>e<i.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),x(e=>e>0?e-1:-1)):"Enter"===e.key?(e.preventDefault(),d>=0&&i[d]?v(i[d]):a.trim()&&y()):"Escape"===e.key&&t()},[d,i,a,t]),v=e=>{f.push(`/products/${e.slug}`),t()},y=()=>{a.trim()&&(f.push(`/products?q=${encodeURIComponent(a.trim())}`),t())};return e?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsx("div",{className:"fixed left-1/2 top-20 z-50 w-full max-w-2xl -translate-x-1/2 transform",children:(0,r.jsxs)("div",{className:"mx-4 rounded-lg bg-white shadow-2xl",children:[r.jsx("div",{className:"relative border-b border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"relative flex items-center",children:[r.jsx(o.jRj,{className:"absolute left-3 h-5 w-5 text-gray-400"}),r.jsx("input",{ref:g,type:"text",value:a,onChange:e=>{s(e.target.value),x(-1)},onKeyDown:b,placeholder:"T\xecm kiếm sản phẩm...",className:"w-full rounded-lg border border-gray-300 py-3 pl-10 pr-10 text-sm focus:border-[#98131b] focus:outline-none focus:ring-2 focus:ring-[#98131b]/20"}),a&&r.jsx("button",{onClick:()=>{s(""),x(-1),g.current?.focus()},className:"absolute right-3 text-gray-400 hover:text-gray-600",children:r.jsx(o.q5L,{className:"h-5 w-5"})})]})}),(0,r.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto",children:[c&&(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx(o.dAq,{className:"h-6 w-6 animate-spin text-[#98131b]"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Đang t\xecm kiếm..."})]}),!c&&a.trim().length>=2&&0===i.length&&r.jsx("div",{className:"py-8 text-center text-sm text-gray-500",children:"Kh\xf4ng t\xecm thấy sản phẩm n\xe0o"}),!c&&a.trim().length<2&&r.jsx("div",{className:"py-8 text-center text-sm text-gray-500",children:"Nhập \xedt nhất 2 k\xfd tự để t\xecm kiếm"}),!c&&i.length>0&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"divide-y divide-gray-100",children:i.map((e,t)=>r.jsx("div",{id:`product-item-${t}`,onClick:()=>v(e),className:`cursor-pointer px-4 py-3 transition-colors ${d===t?"bg-[#98131b]/10":"hover:bg-gray-50"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"relative h-16 w-16 flex-shrink-0 overflow-hidden rounded-md bg-gray-100",children:r.jsx(p.default,{src:e.thumbnailUrl||"/images/placeholder-product.jpg",alt:e.name,fill:!0,className:"object-cover",sizes:"64px"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:e.name}),e.brand&&r.jsx("p",{className:"mt-0.5 text-xs text-gray-500",children:e.brand.name}),(0,r.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-[#98131b]",children:(0,h.T4)(e.price)}),e.comparePrice&&e.comparePrice>e.price&&r.jsx("span",{className:"text-xs text-gray-500 line-through",children:(0,h.T4)(e.comparePrice)})]})]})]})},e.id))}),i.length>0&&r.jsx("div",{className:"border-t border-gray-200 p-4",children:(0,r.jsxs)("button",{onClick:y,className:"w-full rounded-lg bg-[#98131b] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[#98131b]/90",children:["Xem tất cả kết quả (",a.trim(),")"]})})]})]})]})})]}):null}a(54033);let g=new Map,f=e=>e.trim().toLowerCase(),b=()=>{let[e,t]=(0,n.useState)(null);return((0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await (0,l.U)();if(!a||!e)return;let r=a.topBannerText;r&&t(r)}catch(e){console.error("[TopBanner] Failed to load appearance settings:",e)}})(),()=>{e=!1}},[]),e)?r.jsx("div",{className:"w-full bg-white py-2 text-center text-sm text-[#98131b] font-medium",children:e}):null},v=()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await (0,l.U)();if(!a||!e)return;let r=a.logoUrl||a.logo_url;r&&t(r)}catch(e){console.error("[Header Logo] Failed to load appearance settings:",e)}})(),()=>{e=!1}},[]),r.jsx(i.default,{src:e||"/images/banyco-logo.jpg",alt:"Banyco",width:120,height:60,className:"h-auto w-auto max-h-[50px] object-contain",priority:!0})};function y(){let[e,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null),[l,m]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),w=(0,c.x)(e=>e.getTotalItems()),{isAuthenticated:j,user:S}=(0,u.t)();return(0,r.jsxs)("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${p?"bg-white/95 backdrop-blur-sm shadow-lg":"bg-white shadow-sm"}`,children:[r.jsx(b,{}),r.jsx("div",{className:"w-full bg-[#98131b]",children:r.jsx("div",{className:"container-custom",children:(0,r.jsxs)("div",{className:"flex items-center justify-between py-2.5",children:[r.jsx(s.default,{href:"/",className:"flex items-center py-2",children:r.jsx(v,{})}),(0,r.jsxs)("nav",{className:"hidden items-center space-x-1 lg:flex",children:[0===l.length&&r.jsx("div",{className:"text-white/70 text-sm px-4",children:"Menu đang tải..."}),l.map(e=>(0,r.jsxs)("div",{className:"group relative",onMouseEnter:()=>e.megaMenu&&i(e.id),onMouseLeave:()=>i(null),children:[(0,r.jsxs)(s.default,{href:e.href,className:`flex items-center gap-1 px-4 py-2.5 text-sm font-medium text-white transition-all duration-200 rounded-md ${a===e.id?"bg-white/10 text-white":"hover:bg-white/5 hover:text-gray-100"}`,children:[e.name,e.megaMenu&&r.jsx(o.bTu,{className:`h-4 w-4 transition-transform duration-200 ${a===e.id?"rotate-180":""}`})]}),e.megaMenu&&r.jsx("div",{className:"absolute left-0",onMouseEnter:()=>i(e.id),onMouseLeave:()=>i(null),children:r.jsx(d,{data:e.megaMenu,isOpen:a===e.id})})]},e.id))]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>N(!0),className:"text-white hover:text-gray-200 transition-colors","aria-label":"T\xecm kiếm sản phẩm",children:r.jsx(o.jRj,{className:"h-5 w-5"})}),r.jsx(s.default,{href:"/order-lookup",className:"text-white hover:text-gray-200",title:"Tra cứu đơn h\xe0ng",children:r.jsx(o.zFh,{className:"h-5 w-5"})}),(0,r.jsxs)(s.default,{href:"/cart",className:"relative text-white hover:text-gray-200",children:[r.jsx(o.Qyq,{className:"h-5 w-5"}),g&&w>0&&r.jsx("span",{className:"absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full bg-white text-xs text-[#98131b]",children:w})]}),r.jsx("button",{className:"lg:hidden text-white",onClick:()=>t(!e),children:e?r.jsx(o.q5L,{className:"h-6 w-6"}):r.jsx(o.cur,{className:"h-6 w-6"})})]})]})})}),e&&r.jsx("div",{className:"w-full bg-white",children:r.jsx("div",{className:"container-custom",children:r.jsx("nav",{className:"border-t py-4 lg:hidden",children:r.jsx("div",{className:"flex flex-col space-y-2",children:l.map(e=>r.jsx("div",{children:e.megaMenu?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>i(a===e.id?null:e.id),className:"flex w-full items-center justify-between py-2 text-left text-gray-700 hover:text-red-600 transition-colors",children:[r.jsx("span",{children:e.name}),r.jsx(o.bTu,{className:`h-4 w-4 transition-transform ${a===e.id?"rotate-180":""}`})]}),a===e.id&&r.jsx("div",{className:"ml-4 mt-2 space-y-1 border-l-2 border-gray-200 pl-4",children:e.megaMenu.columns.flatMap(e=>e.items).map(e=>r.jsx(s.default,{href:e.href,className:"block py-1.5 text-sm text-gray-600 hover:text-[#98131b] transition-colors",onClick:()=>t(!1),children:e.title},e.id))})]}):r.jsx(s.default,{href:e.href,onClick:()=>t(!1),className:"flex w-full items-center justify-between py-2 text-left text-gray-700 hover:text-red-600 transition-colors",children:e.name})},e.id))})})})}),r.jsx(x,{isOpen:y,onClose:()=>N(!1)})]})}},54722:(e,t,a)=>{a.d(t,{default:()=>u});var r=a(10326),s=a(17577),i=a(40381),n=a(94464),l=a(54033),o=a(28400),c=a(70642);function u({source:e="website",className:t="",inputClassName:a="",buttonClassName:u="",placeholder:d="Nhập email của bạn",buttonText:m="Đăng K\xfd",onSuccess:p}){let[h,x]=(0,s.useState)(""),[g,f]=(0,s.useState)(!1),b=(0,s.useRef)(null),v=(0,s.useRef)(null),y=(0,s.useRef)(null),N=(0,o.gH)(),w=async t=>{if(t.preventDefault(),t.stopPropagation(),!h.trim()){i.ZP.error("Vui l\xf2ng nhập email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.trim())){i.ZP.error("Email kh\xf4ng hợp lệ");return}f(!0);try{let t=(0,l.kG)().replace(/\/api\/?$/,""),a=`${t}/api/newsletter/subscribe`,r={email:h.trim(),source:e};if(r[N.name]="",y.current&&(r._formStartTime=y.current.toString()),(0,c.QV)())try{let e=await (0,c.jv)("newsletter_subscribe");e&&(r.recaptchaToken=e)}catch(e){console.error("[NewsletterForm] reCAPTCHA error:",e)}let s=await n.Z.post(a,r,{headers:{"Content-Type":"application/json"},timeout:1e4});s.data.success?(i.ZP.success(s.data.message||"Đăng k\xfd nhận bản tin th\xe0nh c\xf4ng!"),x(""),p?.()):i.ZP.error(s.data.error||"Đăng k\xfd thất bại")}catch(t){console.error("[NewsletterForm] Error:",t),console.error("[NewsletterForm] Error response:",t.response?.data),console.error("[NewsletterForm] Error status:",t.response?.status);let e=t.response?.data?.error||t.response?.data?.message||t.message||"Đăng k\xfd thất bại. Vui l\xf2ng thử lại sau.";i.ZP.error(e)}finally{f(!1)}};return(0,r.jsxs)("form",{ref:b,onSubmit:e=>{w(e)},className:t,style:{display:"flex",flexDirection:"row",position:"relative",zIndex:10,isolation:"isolate",width:"100%"},onClick:e=>{},children:[r.jsx("input",{...N}),r.jsx("input",{type:"email",value:h,onChange:e=>{x(e.target.value)},placeholder:d,disabled:g,className:a,required:!0,style:{flex:"1 1 auto",minWidth:0,position:"relative",zIndex:1},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w(e))},onClick:e=>{}}),r.jsx("button",{ref:v,type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),w({preventDefault:()=>{},stopPropagation:()=>{}})},disabled:g,className:u,style:{cursor:g?"not-allowed":"pointer",position:"relative",zIndex:10,pointerEvents:"auto",userSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",flexShrink:0},onMouseDown:e=>{},onMouseUp:e=>{},onTouchStart:e=>{},children:g?"Đang xử l\xfd...":m})]})}},60921:(e,t,a)=>{a.d(t,{default:()=>n});var r=a(10326),s=a(17577),i=a(46226);function n({src:e,alt:t,fill:a,width:n,height:l,className:o="",priority:c,sizes:u,fallbackSrc:d="/images/placeholder-product.jpg"}){let[m,p]=(0,s.useState)(!1),h=m||!e?d:e,x=u||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";return a?r.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:r.jsx(i.default,{src:h,alt:t,fill:!0,className:o,priority:c,sizes:x,unoptimized:!1,onError:()=>{m||p(!0)}})}):r.jsx(i.default,{src:h,alt:t,width:n,height:l,className:o,priority:c,sizes:x,unoptimized:!1,onError:()=>{m||p(!0)}})}},91755:(e,t,a)=>{a.d(t,{default:()=>n});var r=a(10326),s=a(17577),i=a(71473);function n(){let[e,t]=(0,s.useState)(!1);return r.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:`fixed bottom-8 right-8 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-[#98131b] text-white shadow-lg transition-all duration-300 hover:bg-[#7a0f16] hover:scale-110 focus:outline-none focus:ring-2 focus:ring-[#98131b] focus:ring-offset-2 ${e?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-4 pointer-events-none"}`,"aria-label":"Scroll to top",children:r.jsx(i.rH8,{className:"h-6 w-6"})})}},78699:(e,t,a)=>{a.d(t,{gF:()=>c,kS:()=>o,x4:()=>n,z2:()=>l});var r=a(59341),s=a(51856);let i=e=>{if(e.firstName||e.lastName)return{firstName:e.firstName||"",lastName:e.lastName||""};if(e.name){let t=e.name.trim().split(/\s+/);if(t.length>=2)return{lastName:t[0],firstName:t.slice(1).join(" ")};if(1===t.length)return{firstName:t[0],lastName:""}}return{firstName:"",lastName:""}},n=async e=>{try{let t=await r.Z.post(s.P.AUTH.LOGIN,e),a=t.data.data.user;if(a.name&&!a.firstName&&!a.lastName){let{firstName:e,lastName:r}=i(a);t.data.data.user={...t.data.data.user,firstName:e,lastName:r},console.warn('[login] ⚠️ Backend should return "firstName" and "lastName" instead of "name" for consistency')}return t.data.data}catch(e){throw console.error("[login] Login error details:",{message:e?.message,response:e?.response?.data,status:e?.response?.status,url:e?.config?.url,baseURL:e?.config?.baseURL,fullURL:e?.config?.baseURL+e?.config?.url}),e}},l=async e=>{try{let t=await r.Z.post(s.P.AUTH.REGISTER,{email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,phone:e.phone||void 0}),a=t.data.data.user;if(a.name&&!a.firstName&&!a.lastName){let{firstName:e,lastName:r}=i(a);t.data.data.user={...t.data.data.user,firstName:e,lastName:r},console.warn('[register] ⚠️ Backend should return "firstName" and "lastName" instead of "name" for consistency')}return t.data.data}catch(e){throw console.error("[register] Register error details:",{message:e?.message,response:e?.response?.data,status:e?.response?.status,url:e?.config?.url,baseURL:e?.config?.baseURL,fullURL:e?.config?.baseURL+e?.config?.url}),e}},o=async()=>{try{await r.Z.post(s.P.AUTH.LOGOUT)}catch(e){console.error("Logout error:",e)}},c=async e=>{await r.Z.post(s.P.AUTH.FORGOT_PASSWORD,{email:e})}},59341:(e,t,a)=>{a.d(t,{Z:()=>n,z:()=>l});var r=a(94464),s=a(54033);let i=r.Z.create({baseURL:(0,s.kG)(),timeout:3e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:a}=(await r.Z.post(`${(0,s.kG)()}/public/auth/refresh`,{refreshToken:e})).data.data;return localStorage.setItem("accessToken",a),t.headers&&(t.headers.Authorization=`Bearer ${a}`),i(t)}}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),Promise.reject(e)}}return Promise.reject(e)});let n=i;function l(e){if(r.Z.isAxiosError(e)){if(e.response){let t=e.response.data;return t?.code==="INSUFFICIENT_STOCK"?`Sản phẩm "${t.productName}" kh\xf4ng đủ số lượng. C\xf2n lại: ${t.availableStock}, Bạn y\xeau cầu: ${t.requestedQuantity}`:t?.error||t?.message||"Đ\xe3 xảy ra lỗi khi xử l\xfd y\xeau cầu"}if(e.request)return"Kh\xf4ng c\xf3 phản hồi từ server. Vui l\xf2ng kiểm tra kết nối của bạn."}return"Đ\xe3 xảy ra lỗi kh\xf4ng mong muốn"}},51856:(e,t,a)=>{a.d(t,{P:()=>r});let r={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",VERIFY_EMAIL:"/auth/verify-email",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",ME:"/auth/me"},PRODUCTS:{LIST:"/products",DETAIL:e=>`/products/${e}`,SEARCH:"/products/search",FEATURED:"/products/featured",BEST_SELLERS:"/products/best-sellers",NEW_ARRIVALS:"/products/new-arrivals",RELATED:e=>`/products/${e}/related`,REVIEWS:e=>`/products/${e}/reviews`},CATEGORIES:{LIST:"/product-categories",DETAIL:e=>`/product-categories/slug/${e}`,TREE:"/product-categories/tree",PRODUCTS:e=>`/product-categories/${e}/products`},BRANDS:{LIST:"/brands",DETAIL:e=>`/brands/slug/${e}`,PRODUCTS:e=>`/brands/${e}/products`},CART:{GET:"/public/cart",ADD:"/public/cart/add",UPDATE:"/public/cart/update",REMOVE:"/public/cart/remove",CLEAR:"/public/cart/clear",APPLY_PROMO:"/public/cart/promo"},ORDERS:{LIST:"/public/orders",DETAIL:e=>`/public/orders/${e}`,CREATE:"/orders",CANCEL:e=>`/public/orders/${e}/cancel`},USER:{PROFILE:"/public/user/profile",UPDATE_PROFILE:"/public/user/profile",ADDRESSES:"/public/user/addresses",ADD_ADDRESS:"/public/user/addresses",UPDATE_ADDRESS:e=>`/public/user/addresses/${e}`,DELETE_ADDRESS:e=>`/public/user/addresses/${e}`,WISHLIST:"/public/user/wishlist",ADD_TO_WISHLIST:"/public/user/wishlist/add",REMOVE_FROM_WISHLIST:"/public/user/wishlist/remove"},SEARCH:{PRODUCTS:"/search/products",SUGGESTIONS:"/search/suggestions"},NEWSLETTER:{SUBSCRIBE:"/newsletter/subscribe"},CONTACTS:{SUBMIT:"/contacts"},ANALYTICS:{TRACK:"/analytics/track"},POSTS:{LIST:"/public/posts",DETAIL:e=>`/public/posts/${e}`,RELATED:e=>`/public/posts/${e}/related`},ABOUT:{SECTIONS:"/about-sections",SECTION_BY_KEY:e=>`/about-sections/key/${e}`},TRACKING:{ACTIVE_SCRIPTS:"/tracking-scripts/active"}}},36704:(e,t,a)=>{a.d(t,{t:()=>l});var r=a(54033),s=a(51856),i=a(96845);let n=e=>{let t=new URLSearchParams;return Object.entries(e).forEach(([e,a])=>{null!=a&&""!==a&&t.append(e,String(a))}),t.toString()},l=async(e={})=>{let t=n({page:e.page,pageSize:e.pageSize,q:e.q,sort:e.sort,category:e.category,brand:e.brand,price:e.price,availability:e.availability,special:e.special}),a=(0,r.f8)(`${s.P.PRODUCTS.LIST}${t?`?${t}`:""}`);try{let t=await fetch(a,{next:{revalidate:60}});if(!t.ok)return console.error("[fetchProducts] Failed to fetch products",t.statusText),{data:[],meta:{total:0,page:1,pageSize:e.pageSize??20,totalPages:0}};let r=await t.json(),s=r.data??[];return{data:s.map(e=>{let t=Array.isArray(e.optionValues)?e.optionValues.map(e=>({optionId:e?.optionId??null,optionName:e?.optionName??"",optionPosition:e?.optionPosition??0,valueId:e?.valueId??null,value:e?.value??"",valueCode:e?.valueCode??null,valuePosition:e?.valuePosition??0})):[];return{...e,thumbnailUrl:(0,i.ZJ)(e.thumbnailUrl),categories:e.categories??[],brand:e.brand??null,rating:e.rating??0,reviewCount:e.reviewCount??0,variantCount:Number(e.variantCount??0),variantSummary:e.variantSummary??null,optionValues:t,isVariant:e.isVariant??!1,variantId:e.variantId??null}}),meta:r.meta??{total:s.length,page:e.page??1,pageSize:e.pageSize??s.length,totalPages:1}}}catch(t){return console.error("[fetchProducts] Error",t),{data:[],meta:{total:0,page:1,pageSize:e.pageSize??20,totalPages:0}}}}},69822:(e,t,a)=>{a.d(t,{t:()=>n});var r=a(60114),s=a(85251),i=a(78699);let n=(0,r.Ue)()((0,s.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,a,r)=>{e({user:t,accessToken:a,refreshToken:r,isAuthenticated:!0})},logout:async()=>{try{await (0,i.kS)()}catch(e){console.error("Logout API error:",e)}e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},94382:(e,t,a)=>{a.d(t,{x:()=>i});var r=a(60114),s=a(85251);let i=(0,r.Ue)()((0,s.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{if(t.quantity<=0)return e;let a=e.items.findIndex(e=>e.productId===t.productId&&e.variantId===t.variantId);if(a>-1){let r=[...e.items];return r[a].quantity+=t.quantity,{items:r}}return{items:[...e.items,t]}}),removeItem:(t,a)=>e(e=>({items:e.items.filter(e=>!(e.productId===t&&e.variantId===a))})),updateQuantity:(t,a,r)=>e(e=>a<=0?{items:e.items.filter(e=>!(e.productId===t&&e.variantId===r))}:{items:e.items.map(e=>e.productId===t&&e.variantId===r?{...e,quantity:a}:e)}),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getTotalPrice:()=>t().getSubtotal()}),{name:"cart-storage"}))},28400:(e,t,a)=>{a.d(t,{gH:()=>r});function r(){return{name:"website",type:"text",tabIndex:-1,autoComplete:"off",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none",height:0,width:0,overflow:"hidden"},"aria-hidden":!0}}},79721:(e,t,a)=>{function r(e){let t=new Intl.NumberFormat("vi-VN").format(Math.round(e));return`${t} đ`}a.d(t,{T4:()=>r,xG:()=>s});let s=r},70642:(e,t,a)=>{function r(){return!1}async function s(e="submit"){return null}a.d(t,{QV:()=>r,jv:()=>s})}};