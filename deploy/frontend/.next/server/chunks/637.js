"use strict";exports.id=637,exports.ids=[637],exports.modules={37137:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});var a=r(19510),l=r(23704),s=r(5050),o=r(83144),i=r(13985);function n({children:t}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Z,{}),a.jsx("main",{className:"min-h-screen pt-[120px] bg-white",children:t}),a.jsx(i.Z,{}),a.jsx(s.Z,{}),a.jsx(o.Z,{})]})}},15921:(t,e,r)=>{r.d(e,{$2:()=>p,f8:()=>g,kG:()=>u,uD:()=>m,z9:()=>h});let a="/api",l=t=>t?t.replace(/\/+$/,""):"",s=t=>t?t.startsWith("/")?t:`/${t}`:"",o=(t,e="")=>{let r=l(t);return e?`${r}${s(e)}`:r},i=()=>{let t=l("https://banyco.vn");if(t)return t;let e="banyco.vn";if(e)return`https://${e}`;let r=process.env.VERCEL_URL||process.env.HOSTNAME;return r?`https://${r}`:"http://localhost:3000"},n=()=>{let t=l("https://ecommerce-api.banyco.vn/api");if(t)return t.endsWith("/api")?t:o(t,a);let e="ecommerce-api.banyco.vn";return e?`https://${e}${a}`:`http://localhost:443${a}`},c=t=>l(t).replace(/\/api$/,""),p=()=>i(),u=()=>n(),d=()=>c(n()),h=(t="")=>o(i(),t),g=(t="")=>o(n(),t),m=(t="")=>o(d(),t)},76835:(t,e,r)=>{r.d(e,{Z:()=>o,z:()=>i});var a=r(24263),l=r(15921);let s=a.Z.create({baseURL:(0,l.kG)(),timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(t=>t,t=>Promise.reject(t)),s.interceptors.response.use(t=>t,async t=>{let e=t.config;if(t.response?.status===401&&!e._retry){e._retry=!0;try{let t=localStorage.getItem("refreshToken");if(t){let{accessToken:r}=(await a.Z.post(`${(0,l.kG)()}/public/auth/refresh`,{refreshToken:t})).data.data;return localStorage.setItem("accessToken",r),e.headers&&(e.headers.Authorization=`Bearer ${r}`),s(e)}}catch(t){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),Promise.reject(t)}}return Promise.reject(t)});let o=s;function i(t){if(a.Z.isAxiosError(t)){if(t.response){let e=t.response.data;return e?.code==="INSUFFICIENT_STOCK"?`Sản phẩm "${e.productName}" kh\xf4ng đủ số lượng. C\xf2n lại: ${e.availableStock}, Bạn y\xeau cầu: ${e.requestedQuantity}`:e?.error||e?.message||"Đ\xe3 xảy ra lỗi khi xử l\xfd y\xeau cầu"}if(t.request)return"Kh\xf4ng c\xf3 phản hồi từ server. Vui l\xf2ng kiểm tra kết nối của bạn."}return"Đ\xe3 xảy ra lỗi kh\xf4ng mong muốn"}},64953:(t,e,r)=>{r.d(e,{C3:()=>s,nv:()=>o}),r(15921);var a=r(76835),l=r(83282);let s=async t=>{if(!t)return null;let e=t.trim().replace(/^-+|-+$/g,"");try{try{let t=await a.Z.get(`/public/posts/slug/${e}`);if(t.data?.success&&t.data?.data){let e=t.data.data,r=null;e.topics&&Array.isArray(e.topics)&&e.topics.length>0?r=e.topics[0].name||e.topics[0]:e.topic&&(r="string"==typeof e.topic?e.topic:e.topic?.name);let a=[];return e.tags&&Array.isArray(e.tags)&&(a=e.tags.map(t=>"string"==typeof t?t:t.name||t).filter(Boolean)),{id:e.id,title:e.title,slug:e.slug,excerpt:e.excerpt||e.description||null,content:e.content||e.body||e.description||null,readTime:e.read_time||e.readTime||null,category:("object"==typeof e.category&&e.category?e.category.name:null)||e.category||null,topic:r,tags:a,postType:e.post_type||"blog",imageUrl:(0,l.ZJ)(e.cover_asset?.url||e.cover_asset?.cdn_url||e.image_url||e.cover_image||e.image),publishedAt:e.published_at||e.publishedAt||e.created_at||null,author:e.author?{id:e.author.id,name:e.author.name||e.author.username||"Admin",avatar:(0,l.ZJ)(e.author.avatar)}:null}}}catch(r){if(t!==e)try{let e=await a.Z.get(`/public/posts/slug/${t}`);if(e.data?.success&&e.data?.data){let t=e.data.data,r=null;t.topics&&Array.isArray(t.topics)&&t.topics.length>0?r=t.topics[0].name||t.topics[0]:t.topic&&(r="string"==typeof t.topic?t.topic:t.topic?.name);let a=[];return t.tags&&Array.isArray(t.tags)&&(a=t.tags.map(t=>"string"==typeof t?t:t.name||t).filter(Boolean)),{id:t.id,title:t.title,slug:t.slug,excerpt:t.excerpt||t.description||null,content:t.content||t.body||t.description||null,readTime:t.read_time||t.readTime||null,category:("object"==typeof t.category&&t.category?t.category.name:null)||t.category||null,topic:r,tags:a,postType:t.post_type||"blog",imageUrl:(0,l.ZJ)(t.cover_asset?.url||t.cover_asset?.cdn_url||t.image_url||t.cover_image||t.image),publishedAt:t.published_at||t.publishedAt||t.created_at||null,author:t.author?{id:t.author.id,name:t.author.name||t.author.username||"Admin",avatar:(0,l.ZJ)(t.author.avatar)}:null}}}catch(t){console.error("[fetchPostBySlug] Encoded slug also failed:",t)}}}catch(t){console.error("[fetchPostBySlug] Public API failed:",(0,a.z)(t))}return console.warn(`[fetchPostBySlug] All APIs failed for slug: ${t}`),null},o=async(t,e=3)=>{try{let r=await a.Z.get(`/public/posts/${t}/related?limit=${e}`);if(r.data?.data)return r.data.data.map(t=>({...t,imageUrl:(0,l.ZJ)(t.imageUrl)}));return[]}catch(t){return console.error("[fetchRelatedPosts] Failed:",(0,a.z)(t)),[]}}},83282:(t,e,r)=>{r.d(e,{ZJ:()=>n});let a=()=>"ecommerce-api.banyco.vn",l=()=>{let t=a();return`https://${t}`},s=t=>{let e=t.match(/https?:\/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(:\d+)?/);if(e){let r=l();return t.replace(e[0],r)}return t},o=()=>{let t="ecommerce-api.banyco.vn";return t?`https://${t}`:"http://localhost:443"},i=()=>!0,n=t=>{let e;if(!t||"string"!=typeof t)return null;let r=t.replace(/\\/g,"/"),a=o(),l=i();return r.startsWith("http://")||r.startsWith("https://")?(((e=r).includes("localhost")||e.includes("127.0.0.1"))&&(e=(e=e.replace(/https?:\/\/localhost(:\d+)?/gi,a)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,a)),e=s(e)):e=`${a}${r.startsWith("/")?"":"/"}${r}`,(e=e.replace(/\/upload\/(?!s)/g,"/uploads/")).startsWith("http://")&&l&&(e=e.replace("http://","https://")),l&&(e.includes("localhost")||e.includes("127.0.0.1"))&&(console.warn(`[normalizeMediaUrl] Found localhost in production, replacing: ${e}`),e=(e=e.replace(/https?:\/\/localhost(:\d+)?/gi,a)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,a)),e}}};