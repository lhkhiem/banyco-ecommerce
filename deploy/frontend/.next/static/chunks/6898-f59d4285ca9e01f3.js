"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6898],{8470:function(e,t,r){r.d(t,{default:function(){return L}});var n=r(7437),a=r(7648),s=r(3145),l=r(2265),o=r(2399),i=r(7996),c=r(2154),u=r(653);function d(e){let{data:t,isOpen:r}=e;if(!r)return null;let s=t.columns.flatMap(e=>e.items);return(0,n.jsx)("div",{className:"absolute left-0 top-full z-50 pt-2",children:(0,n.jsx)("div",{className:"min-w-[220px] max-w-[280px] rounded-lg bg-white shadow-xl border border-gray-200 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:(0,n.jsx)("div",{className:"py-1.5",children:s.map((e,t)=>(0,n.jsxs)(a.default,{href:e.href,className:"block px-4 py-2.5 text-sm text-gray-700 hover:bg-red-50 hover:text-[#98131b] transition-all duration-200 relative group",children:[(0,n.jsxs)("span",{className:"relative z-10 flex items-center",children:[(0,n.jsx)("span",{className:"flex-1",children:e.title}),(0,n.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,n.jsx)("span",{className:"absolute left-0 top-0 bottom-0 w-1 bg-[#98131b] transform scale-y-0 group-hover:scale-y-100 transition-transform duration-200 origin-center"})]},e.id))})})})}var m=r(9376),h=r(7355),f=r(4226),p=r(5862);function x(e){let{isOpen:t,onClose:r}=e,[a,s]=(0,l.useState)(""),[o,c]=(0,l.useState)([]),[u,d]=(0,l.useState)(!1),[x,g]=(0,l.useState)(-1),v=(0,l.useRef)(null),w=(0,m.useRouter)();(0,l.useEffect)(()=>{t&&v.current&&v.current.focus()},[t]),(0,l.useEffect)(()=>{t||(s(""),c([]),g(-1))},[t]),(0,l.useEffect)(()=>{if(!t)return;let e=a.trim();if(e.length<2){c([]),d(!1);return}d(!0);let r=setTimeout(async()=>{try{let t=await (0,h.t)({q:e,page:1,pageSize:10});c(t.data)}catch(e){console.error("[SearchModal] Error fetching products:",e),c([])}finally{d(!1)}},300);return()=>clearTimeout(r)},[a,t]);let y=(0,l.useCallback)(e=>{"ArrowDown"===e.key?(e.preventDefault(),g(e=>e<o.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),g(e=>e>0?e-1:-1)):"Enter"===e.key?(e.preventDefault(),x>=0&&o[x]?b(o[x]):a.trim()&&N()):"Escape"===e.key&&r()},[x,o,a,r]),b=e=>{w.push("/products/".concat(e.slug)),r()},N=()=>{a.trim()&&(w.push("/products?q=".concat(encodeURIComponent(a.trim()))),r())};return((0,l.useEffect)(()=>{if(x>=0){let e=document.getElementById("product-item-".concat(x));e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[x]),t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:r}),(0,n.jsx)("div",{className:"fixed left-1/2 top-20 z-50 w-full max-w-2xl -translate-x-1/2 transform",children:(0,n.jsxs)("div",{className:"mx-4 rounded-lg bg-white shadow-2xl",children:[(0,n.jsx)("div",{className:"relative border-b border-gray-200 p-4",children:(0,n.jsxs)("div",{className:"relative flex items-center",children:[(0,n.jsx)(i.jRj,{className:"absolute left-3 h-5 w-5 text-gray-400"}),(0,n.jsx)("input",{ref:v,type:"text",value:a,onChange:e=>{s(e.target.value),g(-1)},onKeyDown:y,placeholder:"T\xecm kiếm sản phẩm...",className:"w-full rounded-lg border border-gray-300 py-3 pl-10 pr-10 text-sm focus:border-[#98131b] focus:outline-none focus:ring-2 focus:ring-[#98131b]/20"}),a&&(0,n.jsx)("button",{onClick:()=>{var e;s(""),g(-1),null===(e=v.current)||void 0===e||e.focus()},className:"absolute right-3 text-gray-400 hover:text-gray-600",children:(0,n.jsx)(i.q5L,{className:"h-5 w-5"})})]})}),(0,n.jsxs)("div",{className:"max-h-[60vh] overflow-y-auto",children:[u&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,n.jsx)(i.dAq,{className:"h-6 w-6 animate-spin text-[#98131b]"}),(0,n.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Đang t\xecm kiếm..."})]}),!u&&a.trim().length>=2&&0===o.length&&(0,n.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"Kh\xf4ng t\xecm thấy sản phẩm n\xe0o"}),!u&&a.trim().length<2&&(0,n.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"Nhập \xedt nhất 2 k\xfd tự để t\xecm kiếm"}),!u&&o.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"divide-y divide-gray-100",children:o.map((e,t)=>(0,n.jsx)("div",{id:"product-item-".concat(t),onClick:()=>b(e),className:"cursor-pointer px-4 py-3 transition-colors ".concat(x===t?"bg-[#98131b]/10":"hover:bg-gray-50"),children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"relative h-16 w-16 flex-shrink-0 overflow-hidden rounded-md bg-gray-100",children:(0,n.jsx)(f.default,{src:e.thumbnailUrl||"/images/placeholder-product.jpg",alt:e.name,fill:!0,className:"object-cover",sizes:"64px"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:e.name}),e.brand&&(0,n.jsx)("p",{className:"mt-0.5 text-xs text-gray-500",children:e.brand.name}),(0,n.jsxs)("div",{className:"mt-1 flex items-baseline gap-2",children:[(0,n.jsx)("span",{className:"text-sm font-bold text-[#98131b]",children:(0,p.T4)(e.price)}),e.comparePrice&&e.comparePrice>e.price&&(0,n.jsx)("span",{className:"text-xs text-gray-500 line-through",children:(0,p.T4)(e.comparePrice)})]})]})]})},e.id))}),o.length>0&&(0,n.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,n.jsxs)("button",{onClick:N,className:"w-full rounded-lg bg-[#98131b] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[#98131b]/90",children:["Xem tất cả kết quả (",a.trim(),")"]})})]})]})]})})]}):null}var g=r(1971);let v=new Map,w="/menu-locations",y=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e.trim()),b=e=>e.trim().toLowerCase(),N=e=>{let t=new Set;t.add(b(e.id)),e.slug&&t.add(b(e.slug)),e.name&&t.add(b(e.name)),t.forEach(t=>v.set(t,e.id))},j=async e=>{if(!e)return null;let t=e.trim();if(!t)return null;if(y(t))return t;let r=v.get(b(t));if(r)return r;try{let e=(0,g.kG)(),r="".concat(e).concat(w),n=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!n.ok){let e=await n.text().catch(()=>n.statusText);throw Error("Failed to fetch menu locations: ".concat(n.status," ").concat(e))}let a=(await n.json()).data||[];if(0===a.length)return console.warn("[Menu] No menu locations found in API response"),null;a.forEach(e=>{(null==e?void 0:e.id)&&N(e)});let s=v.get(b(t));return s||(console.warn('[Menu] Menu location "'.concat(t,'" not found in API response.')),console.warn("[Menu] Available locations:",a.map(e=>({id:e.id,slug:e.slug,name:e.name}))),console.warn("[Menu] Cache keys:",Array.from(v.keys())),console.warn("[Menu] Looking for key:",b(t))),null!=s?s:null}catch(e){var n;if(console.error("[Menu] Failed to resolve menu location id",e),console.error("[Menu] Error details:",{message:null==e?void 0:e.message,name:null==e?void 0:e.name,stack:null==e?void 0:e.stack,cause:null==e?void 0:e.cause}),(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.includes("Failed to fetch"))||(null==e?void 0:e.name)==="TypeError"){let e=(0,g.kG)(),t="".concat(e).concat(w);console.error("[Menu] This appears to be a network/CORS error. Check:"),console.error("  1. Is the API URL correct?",t),console.error("  2. Are CORS headers set correctly on the backend?"),console.error("  3. Is the API server running and accessible?")}return null}};async function k(e){let t=e||"main-menu";if(!t)return console.warn("[Menu] ⚠️ Menu identifier not configured. Set NEXT_PUBLIC_MAIN_MENU_ID environment variable."),console.warn("[Menu] Add to frontend/.env.local: NEXT_PUBLIC_MAIN_MENU_ID=header"),[];let r=await j(t);if(!r)return console.warn('[Menu] ⚠️ Menu location not found for identifier: "'.concat(t,'"')),console.warn("[Menu] Troubleshooting:"),console.warn("  1. Check Network tab for request to /api/menu-locations"),console.warn("  2. Verify the API URL is correct"),console.warn('  3. Check if menu location with slug "'.concat(t,'" exists in database')),console.warn("  4. Verify NEXT_PUBLIC_MAIN_MENU_ID=".concat(t," is set in frontend/.env.local")),[];try{var n;let e=(0,g.kG)(),t="".concat(e,"/menu-items?location_id=").concat(encodeURIComponent(r)),a=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){let e=await a.text().catch(()=>a.statusText);throw console.error("[Menu] ❌ Failed to fetch menu items: ".concat(a.status," ").concat(e)),Error("Failed to fetch menu items: ".concat(a.status," ").concat(e))}let s=await a.json(),l=Array.isArray(null==s?void 0:s.data)&&s.data.length?s.data:null!==(n=s.flat)&&void 0!==n?n:[];return l.length,null!=l?l:[]}catch(e){return console.error("[Menu] ❌ Failed to fetch menu items",e),[]}}let E=()=>"main-menu",C=()=>{let[e,t]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let r=await (0,o.U)();if(!r||!e)return;let n=r.topBannerText;n&&t(n)}catch(e){console.error("[TopBanner] Failed to load appearance settings:",e)}})(),()=>{e=!1}},[]),e)?(0,n.jsx)("div",{className:"w-full bg-white py-2 text-center text-sm text-[#98131b] font-medium",children:e}):null},I=()=>{let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let r=await (0,o.U)();if(!r||!e)return;let n=r.logoUrl||r.logo_url;n&&t(n)}catch(e){console.error("[Header Logo] Failed to load appearance settings:",e)}})(),()=>{e=!1}},[]),(0,n.jsx)(s.default,{src:e||"/images/banyco-logo.jpg",alt:"Banyco",width:120,height:60,className:"h-auto w-auto max-h-[50px] object-contain",priority:!0})},M=(e,t)=>{let r=(null!=e?e:"").trim();if(r){if(/^(https?:\/\/|mailto:|tel:)/i.test(r)||"#"===r)return r;let e=r.endsWith("#")?r.slice(0,-1):r;return(e.startsWith("/")?e:"/".concat(e)).replace(/\/{2,}/g,"/")}return t?(t.startsWith("/")?t:"/".concat(t)).replace(/\/{2,}/g,"/"):"#"},T=(e,t)=>{if("number"==typeof e&&!Number.isNaN(e))return e;if("string"==typeof e){let t=Number(e);if(!Number.isNaN(t))return t}return t},_=e=>{if(!e)return 0;let t=Date.parse(e);return Number.isNaN(t)?0:t},S=e=>[...e].sort((e,t)=>{let r=T(e.sort_order,Number.MAX_SAFE_INTEGER)-T(t.sort_order,Number.MAX_SAFE_INTEGER);if(0!==r)return r;let n=_(e.created_at)-_(t.created_at);return 0!==n?n:e.title.localeCompare(t.title)}),A=e=>(null!=e?e:[]).filter(e=>e&&!1!==e.is_active),P=e=>{let t=S(A(e.children));if(!t.length)return;let r=t.map(e=>{let t=S(A(e.children));return t.length?{id:"".concat(e.id,"-col"),title:e.title,items:t.map(e=>({id:e.id,title:e.title,href:M(e.url)}))}:{id:"".concat(e.id,"-col"),title:"",items:[{id:e.id,title:e.title,href:M(e.url)}]}}).filter(e=>e.items.length);return r.length?{id:"".concat(e.id,"-mega"),columns:r}:void 0},U=e=>Array.isArray(e)&&e.length?S(A(e)).map(e=>{let t=M(e.url),r=(e.title||"").toLowerCase(),n=t;return(r.includes("ưu đ\xe3i")||r.includes("save now"))&&("#"===n||"/brands"===n||"/brands/"===n||"/brands#"===n)&&(n="/deals"),{id:e.id,name:e.title,href:n,megaMenu:P(e)}}):[];function L(){let[e,t]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[o,m]=(0,l.useState)([]),[h,f]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),y=(0,c.x)(e=>e.getTotalItems()),{isAuthenticated:b,user:N}=(0,u.t)();return(0,l.useEffect)(()=>{g(!0)},[]),(0,l.useEffect)(()=>{let e=()=>{f(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,l.useEffect)(()=>{let e=!1;return(async()=>{try{let t=E();if(!t){console.warn("[Header] NEXT_PUBLIC_MAIN_MENU_ID not set! Menu will not load."),console.warn("[Header] Please add NEXT_PUBLIC_MAIN_MENU_ID=header to frontend/.env.local");return}let r=await k(t);if(e)return;let n=U(r);n.length?m(n):console.warn("[Header] ⚠️ No navigation items after transformation")}catch(t){e||console.error("[Header] ❌ Failed to load CMS main menu",t)}})(),()=>{e=!0}},[]),(0,n.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-50 transition-all duration-300 ".concat(h?"bg-white/95 backdrop-blur-sm shadow-lg":"bg-white shadow-sm"),children:[(0,n.jsx)(C,{}),(0,n.jsx)("div",{className:"w-full bg-[#98131b]",children:(0,n.jsx)("div",{className:"container-custom",children:(0,n.jsxs)("div",{className:"flex items-center justify-between py-2.5",children:[(0,n.jsx)(a.default,{href:"/",className:"flex items-center py-2",children:(0,n.jsx)(I,{})}),(0,n.jsxs)("nav",{className:"hidden items-center space-x-1 lg:flex",children:[0===o.length&&(0,n.jsx)("div",{className:"text-white/70 text-sm px-4",children:"Menu đang tải..."}),o.map(e=>(0,n.jsxs)("div",{className:"group relative",onMouseEnter:()=>e.megaMenu&&s(e.id),onMouseLeave:()=>s(null),children:[(0,n.jsxs)(a.default,{href:e.href,className:"flex items-center gap-1 px-4 py-2.5 text-sm font-medium text-white transition-all duration-200 rounded-md ".concat(r===e.id?"bg-white/10 text-white":"hover:bg-white/5 hover:text-gray-100"),children:[e.name,e.megaMenu&&(0,n.jsx)(i.bTu,{className:"h-4 w-4 transition-transform duration-200 ".concat(r===e.id?"rotate-180":"")})]}),e.megaMenu&&(0,n.jsx)("div",{className:"absolute left-0",onMouseEnter:()=>s(e.id),onMouseLeave:()=>s(null),children:(0,n.jsx)(d,{data:e.megaMenu,isOpen:r===e.id})})]},e.id))]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("button",{onClick:()=>w(!0),className:"text-white hover:text-gray-200 transition-colors","aria-label":"T\xecm kiếm sản phẩm",children:(0,n.jsx)(i.jRj,{className:"h-5 w-5"})}),(0,n.jsx)(a.default,{href:"/order-lookup",className:"text-white hover:text-gray-200",title:"Tra cứu đơn h\xe0ng",children:(0,n.jsx)(i.zFh,{className:"h-5 w-5"})}),(0,n.jsxs)(a.default,{href:"/cart",className:"relative text-white hover:text-gray-200",children:[(0,n.jsx)(i.Qyq,{className:"h-5 w-5"}),p&&y>0&&(0,n.jsx)("span",{className:"absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full bg-white text-xs text-[#98131b]",children:y})]}),(0,n.jsx)("button",{className:"lg:hidden text-white",onClick:()=>t(!e),children:e?(0,n.jsx)(i.q5L,{className:"h-6 w-6"}):(0,n.jsx)(i.cur,{className:"h-6 w-6"})})]})]})})}),e&&(0,n.jsx)("div",{className:"w-full bg-white",children:(0,n.jsx)("div",{className:"container-custom",children:(0,n.jsx)("nav",{className:"border-t py-4 lg:hidden",children:(0,n.jsx)("div",{className:"flex flex-col space-y-2",children:o.map(e=>(0,n.jsx)("div",{children:e.megaMenu?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>s(r===e.id?null:e.id),className:"flex w-full items-center justify-between py-2 text-left text-gray-700 hover:text-red-600 transition-colors",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)(i.bTu,{className:"h-4 w-4 transition-transform ".concat(r===e.id?"rotate-180":"")})]}),r===e.id&&(0,n.jsx)("div",{className:"ml-4 mt-2 space-y-1 border-l-2 border-gray-200 pl-4",children:e.megaMenu.columns.flatMap(e=>e.items).map(e=>(0,n.jsx)(a.default,{href:e.href,className:"block py-1.5 text-sm text-gray-600 hover:text-[#98131b] transition-colors",onClick:()=>t(!1),children:e.title},e.id))})]}):(0,n.jsx)(a.default,{href:e.href,onClick:()=>t(!1),className:"flex w-full items-center justify-between py-2 text-left text-gray-700 hover:text-red-600 transition-colors",children:e.name})},e.id))})})})}),(0,n.jsx)(x,{isOpen:v,onClose:()=>w(!1)})]})}},585:function(e,t,r){r.d(t,{default:function(){return u}});var n=r(7437),a=r(2265),s=r(9064),l=r(3464),o=r(1971),i=r(4025),c=r(6021);function u(e){let{source:t="website",className:r="",inputClassName:u="",buttonClassName:d="",placeholder:m="Nhập email của bạn",buttonText:h="Đăng K\xfd",onSuccess:f}=e,[p,x]=(0,a.useState)(""),[g,v]=(0,a.useState)(!1),w=(0,a.useRef)(null),y=(0,a.useRef)(null),b=(0,a.useRef)(null),N=(0,i.gH)();(0,a.useEffect)(()=>{if(y.current){let e=y.current.getBoundingClientRect();document.elementFromPoint(e.left+e.width/2,e.top+e.height/2)}let e=()=>{b.current||(b.current=(0,i.A9)())},t=w.current;return t&&(t.addEventListener("focusin",e,{once:!0}),t.addEventListener("input",e,{once:!0})),()=>{t&&(t.removeEventListener("focusin",e),t.removeEventListener("input",e))}},[]);let j=async e=>{if(e.preventDefault(),e.stopPropagation(),!p.trim()){s.ZP.error("Vui l\xf2ng nhập email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.trim())){s.ZP.error("Email kh\xf4ng hợp lệ");return}v(!0);try{let e=(0,o.kG)().replace(/\/api\/?$/,""),r={email:p.trim(),source:t};if(r[N.name]="",b.current&&(r._formStartTime=b.current.toString()),(0,c.QV)())try{let e=await (0,c.jv)("newsletter_subscribe");e&&(r.recaptchaToken=e)}catch(e){console.error("[NewsletterForm] reCAPTCHA error:",e)}let n=await l.Z.post("".concat(e,"/api/newsletter/subscribe"),r,{headers:{"Content-Type":"application/json"},timeout:1e4});n.data.success?(s.ZP.success(n.data.message||"Đăng k\xfd nhận bản tin th\xe0nh c\xf4ng!"),x(""),null==f||f()):s.ZP.error(n.data.error||"Đăng k\xfd thất bại")}catch(t){var r,n,a,i,u,d;console.error("[NewsletterForm] Error:",t),console.error("[NewsletterForm] Error response:",null===(r=t.response)||void 0===r?void 0:r.data),console.error("[NewsletterForm] Error status:",null===(n=t.response)||void 0===n?void 0:n.status);let e=(null===(i=t.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.error)||(null===(d=t.response)||void 0===d?void 0:null===(u=d.data)||void 0===u?void 0:u.message)||t.message||"Đăng k\xfd thất bại. Vui l\xf2ng thử lại sau.";s.ZP.error(e)}finally{v(!1)}};return(0,n.jsxs)("form",{ref:w,onSubmit:e=>{j(e)},className:r,style:{display:"flex",flexDirection:"row",position:"relative",zIndex:10,isolation:"isolate",width:"100%"},onClick:e=>{},children:[(0,n.jsx)("input",{...N}),(0,n.jsx)("input",{type:"email",value:p,onChange:e=>{x(e.target.value)},placeholder:m,disabled:g,className:u,required:!0,style:{flex:"1 1 auto",minWidth:0,position:"relative",zIndex:1},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j(e))},onClick:e=>{}}),(0,n.jsx)("button",{ref:y,type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),j({preventDefault:()=>{},stopPropagation:()=>{}})},disabled:g,className:d,style:{cursor:g?"not-allowed":"pointer",position:"relative",zIndex:10,pointerEvents:"auto",userSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",flexShrink:0},onMouseDown:e=>{},onMouseUp:e=>{},onTouchStart:e=>{},children:g?"Đang xử l\xfd...":h})]})}},4226:function(e,t,r){r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),s=r(3145);function l(e){let{src:t,alt:r,fill:l,width:o,height:i,className:c="",priority:u,sizes:d,fallbackSrc:m="/images/placeholder-product.jpg"}=e,[h,f]=(0,a.useState)(!1),p=h||!t?m:t,x=d||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";return l?(0,n.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,n.jsx)(s.default,{src:p,alt:r,fill:!0,className:c,priority:u,sizes:x,unoptimized:!1,onError:()=>{h||f(!0)}})}):(0,n.jsx)(s.default,{src:p,alt:r,width:o,height:i,className:c,priority:u,sizes:x,unoptimized:!1,onError:()=>{h||f(!0)}})}},8725:function(e,t,r){r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265),s=r(7996);function l(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{window.scrollY>300?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,n.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-8 right-8 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-[#98131b] text-white shadow-lg transition-all duration-300 hover:bg-[#7a0f16] hover:scale-110 focus:outline-none focus:ring-2 focus:ring-[#98131b] focus:ring-offset-2 ".concat(e?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-4 pointer-events-none"),"aria-label":"Scroll to top",children:(0,n.jsx)(s.rH8,{className:"h-6 w-6"})})}},2399:function(e,t,r){r.d(t,{$:function(){return l},U:function(){return s}});var n=r(1971),a=r(4911);async function s(){try{let e=(0,n.kG)(),t=await fetch("".concat(e,"/public/settings/appearance"),{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!t.ok)return console.error("[fetchAppearanceSettings] HTTP error:",t.status,t.statusText),null;let r=await t.json();if(!r.success||!r.data)return console.error("[fetchAppearanceSettings] API error:",r.error),null;let s=r.data;return{...s,logoUrl:s.logoUrl||(0,a.ZJ)(s.logo_url),faviconUrl:s.faviconUrl||(0,a.ZJ)(s.favicon_url)}}catch(e){return console.error("[fetchAppearanceSettings] Failed to load appearance settings:",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack}),null}}async function l(){try{let e=(0,n.kG)(),t=await fetch("".concat(e,"/public/settings/general"),{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!t.ok)return console.error("[fetchGeneralSettings] HTTP error:",t.status,t.statusText),null;let r=await t.json();if(!r.success||!r.data)return console.error("[fetchGeneralSettings] API error:",r.error),null;return r.data}catch(e){return console.error("[fetchGeneralSettings] Failed to load general settings:",{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack}),null}}},2154:function(e,t,r){r.d(t,{x:function(){return s}});var n=r(9625),a=r(6885);let s=(0,n.Ue)()((0,a.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{if(t.quantity<=0)return e;let r=e.items.findIndex(e=>e.productId===t.productId&&e.variantId===t.variantId);if(r>-1){let n=[...e.items];return n[r].quantity+=t.quantity,{items:n}}return{items:[...e.items,t]}}),removeItem:(t,r)=>e(e=>({items:e.items.filter(e=>!(e.productId===t&&e.variantId===r))})),updateQuantity:(t,r,n)=>e(e=>r<=0?{items:e.items.filter(e=>!(e.productId===t&&e.variantId===n))}:{items:e.items.map(e=>e.productId===t&&e.variantId===n?{...e,quantity:r}:e)}),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getTotalPrice:()=>t().getSubtotal()}),{name:"cart-storage"}))},4025:function(e,t,r){function n(){return Date.now()}function a(){return{name:"website",type:"text",tabIndex:-1,autoComplete:"off",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none",height:0,width:0,overflow:"hidden"},"aria-hidden":!0}}r.d(t,{A9:function(){return n},gH:function(){return a}})},5862:function(e,t,r){function n(e){let t=new Intl.NumberFormat("vi-VN").format(Math.round(e));return"".concat(t," đ")}r.d(t,{T4:function(){return n},xG:function(){return a}});let a=n},6021:function(e,t,r){r.d(t,{QV:function(){return s},jv:function(){return l}});var n=r(257);function a(){return n.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY||""}function s(){return!!a()}async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit";if(!window.grecaptcha)return null;let t=a();if(!t)return null;try{return new Promise((r,n)=>{window.grecaptcha.ready(async()=>{try{let n=await window.grecaptcha.execute(t,{action:e});r(n)}catch(e){n(e)}})})}catch(e){return console.error("[ReCaptcha] Error executing:",e),null}}}}]);