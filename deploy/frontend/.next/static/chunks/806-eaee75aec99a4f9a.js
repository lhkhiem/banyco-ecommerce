"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{3184:function(e,t,r){r.d(t,{default:function(){return d}});var a=r(7437),i=r(2265),n=r(9064),s=r(7996),l=r(2709),c=r(2154);function d(e){let{productId:t,variantId:r,name:d,price:o,image:u,quantity:m=1,disabled:x=!1,variant:p="primary",size:h="md",fullWidth:g=!1,showIcon:f=!0}=e,[v,b]=(0,i.useState)(!1),y=(0,c.x)(e=>e.addItem),j=async()=>{b(!0);try{y({productId:t,variantId:r,quantity:m,price:o,name:d,image:null!=u?u:"/images/placeholder-product.jpg"}),n.Am.success("Đ\xe3 th\xeam v\xe0o giỏ h\xe0ng",{duration:2500,position:"top-right",icon:"\uD83D\uDED2",style:{minWidth:"220px"}})}catch(e){console.error("Failed to add to cart:",e),n.Am.error("Kh\xf4ng thể th\xeam sản phẩm v\xe0o giỏ h\xe0ng. Vui l\xf2ng thử lại.")}finally{b(!1)}};return(0,a.jsxs)(l.Z,{variant:p,size:h,fullWidth:g,isLoading:v,disabled:x,onClick:j,className:"flex items-center justify-center",children:[!v&&f&&(0,a.jsx)(s.Qyq,{className:"mr-2 h-4 w-4"}),v?"Đang th\xeam...":"Th\xeam v\xe0o giỏ h\xe0ng"]})}},806:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(7437),i=r(7648),n=r(5862),s=r(6857);function l(e){let{children:t,variant:r="default",size:i="md",className:n}=e;return(0,a.jsx)("span",{className:(0,s.cn)("inline-flex items-center justify-center rounded-full font-medium",{default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-[#98131b]",info:"bg-blue-100 text-blue-800",purple:"bg-purple-100 text-purple-800"}[r],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[i],n),children:t})}var c=r(3184),d=r(4226);function o(e){var t;let{product:r}=e,s=r.salePrice?Math.round((r.price-r.salePrice)/r.price*100):0;return(0,a.jsxs)("div",{className:"card card-hover group relative flex h-full flex-col overflow-hidden p-0",children:[r.badge&&(0,a.jsx)("div",{className:"absolute left-2 top-2 z-10",children:(0,a.jsx)(l,{variant:"error",children:r.badge})}),s>0&&(0,a.jsx)("div",{className:"absolute right-2 top-2 z-10",children:(0,a.jsxs)(l,{variant:"success",children:["-",s,"%"]})}),(0,a.jsx)(i.default,{href:"/products/".concat(r.slug),children:(0,a.jsx)("div",{className:"relative w-full aspect-square overflow-hidden bg-gray-100",children:(0,a.jsx)(d.default,{src:r.image||"/images/placeholder-product.jpg",alt:r.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw",priority:!1})})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col p-3",children:[(0,a.jsx)(i.default,{href:"/products/".concat(r.slug),children:(0,a.jsx)("h3",{className:"mb-2 line-clamp-2 h-[2.5rem] text-xs font-medium leading-tight text-gray-900 hover:text-brand-purple-600",children:r.name})}),void 0!==r.rating&&r.rating>0&&(0,a.jsxs)("div",{className:"mb-2 flex items-center text-xs text-gray-600",children:[(0,a.jsxs)("span",{className:"mr-1",children:["⭐ ",r.rating.toFixed(1)]}),r.reviewCount&&r.reviewCount>0&&(0,a.jsxs)("span",{children:["(",r.reviewCount,")"]})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"mb-2 flex items-baseline space-x-2",children:r.salePrice?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-bold text-brand-purple-600",children:(0,n.T4)(r.salePrice)}),(0,a.jsx)("span",{className:"text-xs text-gray-500 line-through",children:(0,n.T4)(r.price)})]}):(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(0,n.T4)(r.price)})}),!r.inStock&&(0,a.jsx)("p",{className:"mb-2 text-xs text-error",children:"Hết h\xe0ng"}),(0,a.jsx)(c.default,{productId:r.productId,variantId:r.variantId,name:r.name,price:null!==(t=r.salePrice)&&void 0!==t?t:r.price,image:r.image,disabled:!r.inStock,variant:"primary",size:"sm",fullWidth:!0})]})]})}},2709:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(7437),i=r(7648),n=r(6857);function s(e){let{children:t,variant:r="primary",size:s="md",isLoading:l=!1,fullWidth:c=!1,className:d,disabled:o,href:u,...m}=e,x=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[r],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[s],c&&"w-full",(o||l)&&"opacity-50 cursor-not-allowed",d),p=l?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):t;return u?(0,a.jsx)(i.default,{href:u,legacyBehavior:!0,passHref:!0,children:(0,a.jsx)("a",{className:x,children:p})}):(0,a.jsx)("button",{className:x,disabled:o||l,...m,children:p})}},4226:function(e,t,r){r.d(t,{default:function(){return s}});var a=r(7437),i=r(2265),n=r(3145);function s(e){let{src:t,alt:r,fill:s,width:l,height:c,className:d="",priority:o,sizes:u,fallbackSrc:m="/images/placeholder-product.jpg"}=e,[x,p]=(0,i.useState)(!1),h=x||!t?m:t,g=u||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";return s?(0,a.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,a.jsx)(n.default,{src:h,alt:r,fill:!0,className:d,priority:o,sizes:g,unoptimized:!1,onError:()=>{x||p(!0)}})}):(0,a.jsx)(n.default,{src:h,alt:r,width:l,height:c,className:d,priority:o,sizes:g,unoptimized:!1,onError:()=>{x||p(!0)}})}},2154:function(e,t,r){r.d(t,{x:function(){return n}});var a=r(9625),i=r(6885);let n=(0,a.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{if(t.quantity<=0)return e;let r=e.items.findIndex(e=>e.productId===t.productId&&e.variantId===t.variantId);if(r>-1){let a=[...e.items];return a[r].quantity+=t.quantity,{items:a}}return{items:[...e.items,t]}}),removeItem:(t,r)=>e(e=>({items:e.items.filter(e=>!(e.productId===t&&e.variantId===r))})),updateQuantity:(t,r,a)=>e(e=>r<=0?{items:e.items.filter(e=>!(e.productId===t&&e.variantId===a))}:{items:e.items.map(e=>e.productId===t&&e.variantId===a?{...e,quantity:r}:e)}),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getTotalPrice:()=>t().getSubtotal()}),{name:"cart-storage"}))},5862:function(e,t,r){function a(e){let t=new Intl.NumberFormat("vi-VN").format(Math.round(e));return"".concat(t," đ")}r.d(t,{T4:function(){return a},xG:function(){return i}});let i=a},6857:function(e,t,r){r.d(t,{cn:function(){return i}});var a=r(1994);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.W)(t)}}}]);