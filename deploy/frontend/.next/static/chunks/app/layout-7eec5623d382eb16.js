(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6210:function(t,e,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,2552)),Promise.resolve().then(n.bind(n,8326)),Promise.resolve().then(n.bind(n,4692)),Promise.resolve().then(n.t.bind(n,8003,23)),Promise.resolve().then(n.t.bind(n,4285,23))},2552:function(t,e,n){"use strict";n.d(e,{default:function(){return l}});var o=n(2265),r=n(9376),a=n(1971);function i(){let t=localStorage.getItem("analytics_visitor_id");return t||(t="visitor_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("analytics_visitor_id",t)),t}function c(){let t=sessionStorage.getItem("analytics_session_id");t||(t="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("analytics_session_id",t),sessionStorage.setItem("analytics_session_start",Date.now().toString()));let e=parseInt(sessionStorage.getItem("analytics_session_start")||"0"),n=Date.now();return n-e>18e5&&(t="session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem("analytics_session_id",t),sessionStorage.setItem("analytics_session_start",n.toString())),t}async function s(t){try{let e=(0,a.kG)(),n="".concat(e,"/analytics/track"),o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0});if(o.ok)await o.json();else{let t=await o.text();console.error("[Analytics] Tracking failed:",{status:o.status,statusText:o.statusText,error:t,url:n})}}catch(t){console.error("[Analytics] Tracking error:",{error:t.message,stack:t.stack,name:t.name})}}function l(){let t=(0,r.usePathname)(),e=(0,r.useSearchParams)(),n=(0,o.useRef)(Date.now()),l=(0,o.useRef)("");return(0,o.useEffect)(()=>{(()=>{let o=i(),r=c();if(!o||!r)return;let a=e?{utm_source:e.get("utm_source")||void 0,utm_medium:e.get("utm_medium")||void 0,utm_campaign:e.get("utm_campaign")||void 0,utm_term:e.get("utm_term")||void 0,utm_content:e.get("utm_content")||void 0}:{};s({page_url:window.location.href,page_title:document.title,page_path:t,referrer:document.referrer||void 0,visitor_id:o,session_id:r,user_agent:navigator.userAgent,screen_width:window.screen.width,screen_height:window.screen.height,viewport_width:window.innerWidth,viewport_height:window.innerHeight,...a}),n.current=Date.now(),l.current=t})();let o=()=>{if(l.current){let t=Math.floor((Date.now()-n.current)/1e3);if(t>0){let e=i(),n=c(),o=(0,a.kG)(),r={page_url:window.location.href,page_path:l.current,visitor_id:e,session_id:n,time_on_page:t};navigator.sendBeacon("".concat(o,"/analytics/track"),JSON.stringify(r))}}};return window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o)}},[t,e]),null}},8326:function(t,e,n){"use strict";n.d(e,{FaviconProvider:function(){return i}});var o=n(2265),r=n(2399),a=n(4911);function i(){return(0,o.useEffect)(()=>{let t=!0,e=e=>{if(!t||!e||"undefined"==typeof document||!document.head)return;let n=(0,a.ZJ)(e)||e;try{document.querySelectorAll('link[rel*="icon"], link[rel="apple-touch-icon"]').forEach(t=>{var e;return null===(e=t.parentNode)||void 0===e?void 0:e.removeChild(t)});let t=function(t){let e=t.toLowerCase();return e.endsWith(".svg")?"image/svg+xml":e.endsWith(".png")?"image/png":(e.endsWith(".ico"),"image/x-icon")}(n),e=document.createElement("link");e.rel="icon",e.type=t,e.href=n,document.head.appendChild(e);let o=document.createElement("link");o.rel="shortcut icon",o.href=n,document.head.appendChild(o);let r=document.createElement("link");r.rel="apple-touch-icon",r.href=n,document.head.appendChild(r)}catch(t){console.error("[FaviconProvider] Failed to update favicon:",t)}};return(async()=>{let t=await (0,r.U)();t&&e(t.faviconUrl||t.favicon_url)})(),()=>{t=!1}},[]),null}},4692:function(t,e,n){"use strict";n.d(e,{ToasterProvider:function(){return a}});var o=n(7437),r=n(9064);function a(){return(0,o.jsx)(r.x7,{position:"top-right",toastOptions:{duration:3e3,style:{fontSize:"0.95rem"}}})}},1971:function(t,e,n){"use strict";n.d(e,{f8:function(){return d},kG:function(){return l},uD:function(){return h}}),n(257);let o="/api",r=t=>t?t.replace(/\/+$/,""):"",a=t=>t?t.startsWith("/")?t:"/".concat(t):"",i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r(t);return e?"".concat(n).concat(a(e)):n},c=()=>{let t=r("https://ecommerce-api.banyco.vn/api");if(t)return t.endsWith("/api")?t:i(t,o);let e="ecommerce-api.banyco.vn";if(e){let t=window.location.protocol;return"".concat(t,"//").concat(e).concat(o)}{let{protocol:t,hostname:e}=window.location;return i("".concat(t,"//").concat(e).concat(":".concat("443")),o)}},s=t=>r(t).replace(/\/api$/,""),l=()=>c(),u=()=>s(c()),d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(c(),t)},h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(u(),t)}},2399:function(t,e,n){"use strict";n.d(e,{$:function(){return i},U:function(){return a}});var o=n(1971),r=n(4911);async function a(){try{let t=(0,o.kG)(),e=await fetch("".concat(t,"/public/settings/appearance"),{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)return console.error("[fetchAppearanceSettings] HTTP error:",e.status,e.statusText),null;let n=await e.json();if(!n.success||!n.data)return console.error("[fetchAppearanceSettings] API error:",n.error),null;let a=n.data;return{...a,logoUrl:a.logoUrl||(0,r.ZJ)(a.logo_url),faviconUrl:a.faviconUrl||(0,r.ZJ)(a.favicon_url)}}catch(t){return console.error("[fetchAppearanceSettings] Failed to load appearance settings:",{message:null==t?void 0:t.message,stack:null==t?void 0:t.stack}),null}}async function i(){try{let t=(0,o.kG)(),e=await fetch("".concat(t,"/public/settings/general"),{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)return console.error("[fetchGeneralSettings] HTTP error:",e.status,e.statusText),null;let n=await e.json();if(!n.success||!n.data)return console.error("[fetchGeneralSettings] API error:",n.error),null;return n.data}catch(t){return console.error("[fetchGeneralSettings] Failed to load general settings:",{message:null==t?void 0:t.message,stack:null==t?void 0:t.stack}),null}}},4911:function(t,e,n){"use strict";n.d(e,{ZJ:function(){return s}});let o=()=>"ecommerce-api.banyco.vn",r=()=>{let t=o();{let e=window.location.protocol;return"".concat(e,"//").concat(t)}},a=t=>{let e=t.match(/https?:\/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(:\d+)?/);if(e){let n=r();return t.replace(e[0],n)}return t},i=()=>{{let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t)}return"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat("443")}},c=()=>!0,s=t=>{let e;if(!t||"string"!=typeof t)return null;let n=t.replace(/\\/g,"/"),o=i(),r=c();return n.startsWith("http://")||n.startsWith("https://")?(((e=n).includes("localhost")||e.includes("127.0.0.1"))&&(e=(e=e.replace(/https?:\/\/localhost(:\d+)?/gi,o)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,o)),e=a(e)):e="".concat(o).concat(n.startsWith("/")?"":"/").concat(n),(e=e.replace(/\/upload\/(?!s)/g,"/uploads/")).startsWith("http://")&&r&&(e=e.replace("http://","https://")),r&&(e.includes("localhost")||e.includes("127.0.0.1"))&&(console.warn("[normalizeMediaUrl] Found localhost in production, replacing: ".concat(e)),e=(e=e.replace(/https?:\/\/localhost(:\d+)?/gi,o)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,o)),e}},7960:function(){}},function(t){t.O(0,[3587,3516,9064,7419,2971,2117,1744],function(){return t(t.s=6210)}),_N_E=t.O()}]);