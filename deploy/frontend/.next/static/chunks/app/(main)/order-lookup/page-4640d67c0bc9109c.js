(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1284],{672:function(e,t,n){Promise.resolve().then(n.bind(n,1443))},1443:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7437),s=n(2265),a=n(7648),i=n(7996),l=n(1971);function c(){let[e,t]=(0,s.useState)(""),[n,c]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),[u,x]=(0,s.useState)(!1),g=async t=>{if(t.preventDefault(),!e.trim()){h("Vui l\xf2ng nhập số điện thoại");return}d(!0),h(null),x(!0);try{let t=e.replace(/[\s\-\(\)]/g,""),n=(0,l.f8)("orders/phone/".concat(encodeURIComponent(t))),r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){let e=await r.json().catch(()=>({}));if(console.error("❌ API Error:",e),404===r.status)c([]),h(e.message||e.error||"Kh\xf4ng t\xecm thấy đơn h\xe0ng n\xe0o với số điện thoại n\xe0y");else{let t=e.message||e.error||"Lỗi khi t\xecm kiếm đơn h\xe0ng. Vui l\xf2ng thử lại sau.";throw Error(t)}return}let s=await r.json();s.success&&s.data?(c(s.data),0===s.data.length?h("Kh\xf4ng t\xecm thấy đơn h\xe0ng n\xe0o với số điện thoại n\xe0y"):h(null)):s.data&&Array.isArray(s.data)?(c(s.data),0===s.data.length?h("Kh\xf4ng t\xecm thấy đơn h\xe0ng n\xe0o với số điện thoại n\xe0y"):h(null)):(c([]),h(s.message||"Kh\xf4ng t\xecm thấy đơn h\xe0ng n\xe0o với số điện thoại n\xe0y"))}catch(e){console.error("❌ Failed to lookup orders:",e),h(e.message||"Lỗi khi t\xecm kiếm đơn h\xe0ng. Vui l\xf2ng thử lại sau."),c([])}finally{d(!1)}},p=e=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",f=e=>({pending:"Chờ xử l\xfd",processing:"Đang xử l\xfd",shipped:"Đ\xe3 giao h\xe0ng",delivered:"Đ\xe3 nhận h\xe0ng",cancelled:"Đ\xe3 hủy"})[e]||e,y=e=>({pending:"Chờ thanh to\xe1n",paid:"Đ\xe3 thanh to\xe1n",failed:"Thanh to\xe1n thất bại",refunded:"Đ\xe3 ho\xe0n tiền"})[e]||e,b=e=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",v=e=>({cod:"Ship COD (Thanh to\xe1n khi nhận h\xe0ng)",zalopay:"ZaloPay (Thanh to\xe1n trực tuyến)",card:"Thẻ t\xedn dụng/Ghi nợ"})[e]||e,j=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),N=e=>new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Ho_Chi_Minh"});return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-16",children:(0,r.jsxs)("div",{className:"container-custom py-12",children:[(0,r.jsxs)("div",{className:"mb-8 text-center",children:[(0,r.jsx)("h1",{className:"mb-3 text-3xl font-bold text-gray-900",children:"Tra cứu đơn h\xe0ng"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Nhập số điện thoại đ\xe3 sử dụng khi đặt h\xe0ng để xem trạng th\xe1i đơn h\xe0ng"})]}),(0,r.jsxs)("div",{className:"mx-auto max-w-2xl",children:[(0,r.jsxs)("form",{onSubmit:g,className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.tUt,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"tel",value:e,onChange:e=>t(e.target.value),placeholder:"Nhập số điện thoại (v\xed dụ: 0901234567)",className:"w-full rounded-lg border border-gray-300 bg-white px-12 py-4 text-lg focus:border-brand-purple-500 focus:outline-none focus:ring-2 focus:ring-brand-purple-500",disabled:o})]})}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"rounded-lg bg-brand-purple-600 px-8 py-4 font-semibold text-white transition-colors hover:bg-brand-purple-700 disabled:opacity-50",children:o?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Đang t\xecm..."]}):(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.jRj,{className:"h-5 w-5"}),"T\xecm kiếm"]})})]}),m&&(0,r.jsx)("div",{className:"mt-4 rounded-lg bg-red-50 p-4 text-red-800",children:m})]}),u&&!o&&n.length>0&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["T\xecm thấy ",n.length," đơn h\xe0ng"]}),n.map(e=>(0,r.jsxs)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[(0,r.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,r.jsx)(i.zFh,{className:"h-5 w-5 text-brand-purple-600"}),(0,r.jsxs)("span",{className:"font-semibold text-gray-900",children:["Đơn h\xe0ng: ",e.order_number]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Ng\xe0y đặt: ",N(e.created_at)]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Tổng tiền:"}),(0,r.jsx)("p",{className:"text-lg font-bold text-brand-purple-600",children:j(e.total)})]}),(0,r.jsx)("span",{className:"rounded-full px-3 py-1 text-sm font-medium ".concat(p(e.status)),children:f(e.status)})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"mb-4 font-semibold text-gray-900",children:"Chi tiết đơn h\xe0ng:"}),e.items&&e.items.length>0?(0,r.jsx)("div",{className:"mb-6 space-y-3",children:e.items.map(e=>(0,r.jsxs)("div",{className:"flex items-start justify-between border-b border-gray-100 pb-3 last:border-0",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.product_name}),e.sku&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["SKU: ",e.sku]}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["Số lượng: ",e.quantity," \xd7 ",j(e.unit_price)]})]}),(0,r.jsx)("div",{className:"ml-4 text-right",children:(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:j(e.total_price)})})]},e.id))}):(0,r.jsx)("div",{className:"mb-6 rounded-lg bg-gray-50 p-4 text-center text-sm text-gray-600",children:"Kh\xf4ng c\xf3 sản phẩm n\xe0o trong đơn h\xe0ng n\xe0y"}),(0,r.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[void 0!==e.subtotal&&null!==e.subtotal&&(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tạm t\xednh:"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:j(e.subtotal)})]}),void 0!==e.discount_amount&&null!==e.discount_amount&&e.discount_amount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Giảm gi\xe1:"}),(0,r.jsxs)("span",{className:"font-medium text-red-600",children:["-",j(e.discount_amount)]})]}),void 0!==e.shipping_cost&&null!==e.shipping_cost&&(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Ph\xed vận chuyển:"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:j(e.shipping_cost)})]}),void 0!==e.tax_amount&&null!==e.tax_amount&&e.tax_amount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Thuế VAT:"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:j(e.tax_amount)})]}),(0,r.jsx)("div",{className:"border-t border-gray-300 pt-2",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:"Tổng tiền:"}),(0,r.jsx)("span",{className:"text-lg font-bold text-brand-purple-600",children:j(e.total)})]})})]})})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50 p-6",children:[(0,r.jsx)("h3",{className:"mb-4 font-semibold text-gray-900",children:"Th\xf4ng tin thanh to\xe1n v\xe0 vận chuyển:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-2 text-sm font-medium text-gray-600",children:"Th\xf4ng tin thanh to\xe1n:"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Trạng th\xe1i:"}),(0,r.jsx)("span",{className:"rounded-full px-2 py-1 text-xs font-medium ".concat(b(e.payment_status)),children:y(e.payment_status)})]}),e.payment_method&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Phương thức:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:v(e.payment_method)})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-2 text-sm font-medium text-gray-600",children:"Th\xf4ng tin vận chuyển:"}),(0,r.jsxs)("div",{className:"space-y-2",children:[void 0!==e.shipping_cost&&null!==e.shipping_cost&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Ph\xed vận chuyển:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:0===e.shipping_cost?"Miễn ph\xed":j(e.shipping_cost)})]}),e.tracking_number&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.C4B,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:["M\xe3 vận đơn: ",e.tracking_number]})]})]})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-1 text-sm font-medium text-gray-600",children:"Th\xf4ng tin kh\xe1ch h\xe0ng:"}),(0,r.jsx)("p",{className:"text-gray-900",children:e.customer_name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.customer_email}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.customer_phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-1 text-sm font-medium text-gray-600",children:"Thời gian:"}),e.shipped_at&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Ng\xe0y giao: ",N(e.shipped_at)]}),e.delivered_at&&(0,r.jsxs)("p",{className:"text-sm text-green-600",children:["Đ\xe3 nhận: ",N(e.delivered_at)]})]})]})})]},e.id))]}),u&&!o&&0===n.length&&!m&&(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-12 text-center",children:[(0,r.jsx)(i.zFh,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),(0,r.jsx)("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"Kh\xf4ng t\xecm thấy đơn h\xe0ng"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Kh\xf4ng c\xf3 đơn h\xe0ng n\xe0o được t\xecm thấy với số điện thoại n\xe0y."})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)(a.default,{href:"/",className:"inline-flex items-center gap-2 text-brand-purple-600 hover:text-brand-purple-700",children:"← Quay lại trang chủ"})})]})]})})}},1971:function(e,t,n){"use strict";n.d(t,{f8:function(){return m},kG:function(){return o},uD:function(){return h}}),n(257);let r="/api",s=e=>e?e.replace(/\/+$/,""):"",a=e=>e?e.startsWith("/")?e:"/".concat(e):"",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=s(e);return t?"".concat(n).concat(a(t)):n},l=()=>{let e=s("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:i(e,r);let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t).concat(r)}{let{protocol:e,hostname:t}=window.location;return i("".concat(e,"//").concat(t).concat(":".concat("443")),r)}},c=e=>s(e).replace(/\/api$/,""),o=()=>l(),d=()=>c(l()),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(l(),e)},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(d(),e)}},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return s.a}});var r=n(2972),s=n.n(r)},257:function(e,t,n){"use strict";var r,s;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],o=!1,d=-1;function m(){o&&r&&(o=!1,r.length?c=r.concat(c):d=-1,c.length&&h())}function h(){if(!o){var e=l(m);o=!0;for(var t=c.length;t;){for(r=c,c=[];++d<t;)r&&r[d].run();d=-1,t=c.length}r=null,o=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function x(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new u(e,t)),1!==c.length||o||l(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.prependListener=x,s.prependOnceListener=x,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab="//";var s=r(229);e.exports=s}()},6231:function(e,t,n){"use strict";n.d(t,{w_:function(){return d}});var r=n(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(s),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e){return t=>r.createElement(m,l({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,o({key:n},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var n,{attr:s,size:a,title:c}=e,d=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,i),m=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:n,style:o(o({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==a?r.createElement(a.Consumer,null,e=>t(e)):t(s)}}},function(e){e.O(0,[9956,2972,2971,2117,1744],function(){return e(e.s=672)}),_N_E=e.O()}]);