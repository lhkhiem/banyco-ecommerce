(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9049],{8786:function(e,r,s){Promise.resolve().then(s.bind(s,3839))},3839:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return g}});var t=s(7437),a=s(2265),n=s(9376),l=s(7648),i=s(3145),o=s(9501),c=s(7996),d=s(2709),u=s(7194),m=s(653),h=s(3414),x=s(6857),p=s(9064);function g(){var e,r,s,g,f,v;let b=(0,n.useRouter)(),{setAuth:N}=(0,m.t)(),[j,y]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[P,I]=(0,a.useState)(!1),{register:A,handleSubmit:Z,watch:R,formState:{errors:S}}=(0,o.cI)({mode:"onSubmit",reValidateMode:"onChange"}),C=R("password");R("termsAccepted");let z=async e=>{I(!0);try{let r={email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,phone:e.phone||void 0},s=await (0,h.z2)(r);N(s.user,s.accessToken,s.refreshToken),p.ZP.success("Đăng k\xfd th\xe0nh c\xf4ng!"),b.push("/account")}catch(o){var r,s,t,a,n,l,i;console.error("Register error:",o),console.error("Error details:",{message:null==o?void 0:o.message,response:null==o?void 0:null===(r=o.response)||void 0===r?void 0:r.data,status:null==o?void 0:null===(s=o.response)||void 0===s?void 0:s.status,url:null==o?void 0:null===(t=o.config)||void 0===t?void 0:t.url,baseURL:null==o?void 0:null===(a=o.config)||void 0===a?void 0:a.baseURL});let e="Đăng k\xfd thất bại. Vui l\xf2ng thử lại.";(null==o?void 0:o.response)?e=(null===(n=o.response.data)||void 0===n?void 0:n.message)||(null===(i=o.response.data)||void 0===i?void 0:null===(l=i.error)||void 0===l?void 0:l.message)||e:(null==o?void 0:o.request)?e="Kh\xf4ng thể kết nối đến server. Vui l\xf2ng kiểm tra kết nối mạng.":(null==o?void 0:o.message)&&(e=o.message),p.ZP.error(e)}finally{I(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 pt-[120px] pb-16",children:(0,t.jsx)("div",{className:"container-custom",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,t.jsx)("div",{className:"mb-8 text-center",children:(0,t.jsx)(l.default,{href:"/",className:"inline-block",children:(0,t.jsx)(i.default,{src:"/images/banyco-logo.jpg",alt:"Logo",width:150,height:75,className:"mx-auto h-auto w-auto"})})}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white p-8 shadow-xl",children:[(0,t.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Đăng k\xfd"}),(0,t.jsx)("p",{className:"mb-8 text-gray-600",children:"Tạo t\xe0i khoản mới để bắt đầu mua sắm ngay h\xf4m nay."}),(0,t.jsxs)("form",{onSubmit:Z(z,e=>{console.error("[Register] ========== VALIDATION ERRORS =========="),console.error("[Register] Form validation errors:",e),console.error("[Register] Form has errors, cannot submit");let r=R();console.error("[Register] Current form values:",{firstName:r.firstName,lastName:r.lastName,email:r.email,phone:r.phone,password:r.password?"***":void 0,confirmPassword:r.confirmPassword?"***":void 0,termsAccepted:r.termsAccepted})}),className:"space-y-5",noValidate:!0,children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(u.Z,{label:"Họ",type:"text",placeholder:"Nguyễn",leftIcon:(0,t.jsx)(c.fzv,{className:"h-5 w-5"}),error:null===(e=S.lastName)||void 0===e?void 0:e.message,...A("lastName",{required:"Họ l\xe0 bắt buộc"})}),(0,t.jsx)(u.Z,{label:"T\xean",type:"text",placeholder:"Văn A",leftIcon:(0,t.jsx)(c.fzv,{className:"h-5 w-5"}),error:null===(r=S.firstName)||void 0===r?void 0:r.message,...A("firstName",{required:"T\xean l\xe0 bắt buộc"})})]}),(0,t.jsx)(u.Z,{label:"Email",type:"email",placeholder:"your.email@example.com",leftIcon:(0,t.jsx)(c.Imn,{className:"h-5 w-5"}),error:null===(s=S.email)||void 0===s?void 0:s.message,...A("email",{required:"Email l\xe0 bắt buộc",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email kh\xf4ng hợp lệ"}})}),(0,t.jsx)(u.Z,{label:"Số điện thoại",type:"tel",placeholder:"0901234567",leftIcon:(0,t.jsx)(c.tUt,{className:"h-5 w-5"}),error:null===(g=S.phone)||void 0===g?void 0:g.message,...A("phone",{pattern:{value:/^[0-9]{10,11}$/,message:"Số điện thoại kh\xf4ng hợp lệ"}})}),(0,t.jsx)(u.Z,{label:"Mật khẩu",type:j?"text":"password",placeholder:"••••••••",leftIcon:(0,t.jsx)(c.UIZ,{className:"h-5 w-5"}),rightIcon:(0,t.jsx)("button",{type:"button",onClick:()=>y(!j),className:"text-gray-400 hover:text-gray-600",children:j?(0,t.jsx)(c.rzC,{className:"h-5 w-5"}):(0,t.jsx)(c.rDJ,{className:"h-5 w-5"})}),error:null===(f=S.password)||void 0===f?void 0:f.message,helperText:"Tối thiểu 6 k\xfd tự",...A("password",{required:"Mật khẩu l\xe0 bắt buộc",minLength:{value:6,message:"Mật khẩu phải c\xf3 \xedt nhất 6 k\xfd tự"}})}),(0,t.jsx)(u.Z,{label:"X\xe1c nhận mật khẩu",type:w?"text":"password",placeholder:"••••••••",leftIcon:(0,t.jsx)(c.UIZ,{className:"h-5 w-5"}),rightIcon:(0,t.jsx)("button",{type:"button",onClick:()=>k(!w),className:"text-gray-400 hover:text-gray-600",children:w?(0,t.jsx)(c.rzC,{className:"h-5 w-5"}):(0,t.jsx)(c.rDJ,{className:"h-5 w-5"})}),error:null===(v=S.confirmPassword)||void 0===v?void 0:v.message,...A("confirmPassword",{required:"Vui l\xf2ng x\xe1c nhận mật khẩu",validate:e=>e===C||"Mật khẩu x\xe1c nhận kh\xf4ng khớp"})}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"checkbox",id:"terms",className:(0,x.cn)("mt-1 h-4 w-4 rounded border-gray-300 text-brand-purple-600 focus:ring-brand-purple-500",S.termsAccepted&&"border-red-500"),...A("termsAccepted",{required:"Bạn phải đồng \xfd với Điều khoản sử dụng v\xe0 Ch\xednh s\xe1ch bảo mật"})}),(0,t.jsxs)("label",{htmlFor:"terms",className:"ml-2 text-sm text-gray-600",children:["T\xf4i đồng \xfd với"," ",(0,t.jsx)(l.default,{href:"/terms",className:"text-brand-purple-600 hover:underline",children:"Điều khoản sử dụng"})," ","v\xe0"," ",(0,t.jsx)(l.default,{href:"/privacy",className:"text-brand-purple-600 hover:underline",children:"Ch\xednh s\xe1ch bảo mật"})]})]}),S.termsAccepted&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.termsAccepted.message}),(0,t.jsx)(d.Z,{type:"submit",size:"lg",fullWidth:!0,isLoading:P,disabled:P,children:"Đăng k\xfd"})]}),(0,t.jsxs)("div",{className:"my-8 flex items-center",children:[(0,t.jsx)("div",{className:"flex-1 border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-sm text-gray-500",children:"hoặc"}),(0,t.jsx)("div",{className:"flex-1 border-t border-gray-200"})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-gray-600",children:["Đ\xe3 c\xf3 t\xe0i khoản?"," ",(0,t.jsx)(l.default,{href:"/login",className:"font-semibold text-brand-purple-600 hover:text-brand-purple-700",children:"Đăng nhập ngay"})]})})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(l.default,{href:"/",className:"text-sm text-gray-600 hover:text-gray-900",children:"← Quay lại trang chủ"})})]})})})}},2709:function(e,r,s){"use strict";s.d(r,{Z:function(){return l}});var t=s(7437),a=s(7648),n=s(6857);function l(e){let{children:r,variant:s="primary",size:l="md",isLoading:i=!1,fullWidth:o=!1,className:c,disabled:d,href:u,...m}=e,h=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[s],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[l],o&&"w-full",(d||i)&&"opacity-50 cursor-not-allowed",c),x=i?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):r;return u?(0,t.jsx)(a.default,{href:u,legacyBehavior:!0,passHref:!0,children:(0,t.jsx)("a",{className:h,children:x})}):(0,t.jsx)("button",{className:h,disabled:d||i,...m,children:x})}},7194:function(e,r,s){"use strict";var t=s(7437),a=s(2265),n=s(6857);let l=(0,a.forwardRef)((e,r)=>{let{label:s,error:l,helperText:i,leftIcon:o,rightIcon:c,className:d,id:u,required:m,...h}=e,x=(0,a.useId)(),p=null!=u?u:x;return(0,t.jsxs)("div",{className:"w-full",children:[s&&(0,t.jsxs)("label",{htmlFor:p,className:"mb-1.5 block text-sm font-medium text-gray-700",children:[s,m&&(0,t.jsx)("span",{className:"ml-1 text-error",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[o&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:o}),(0,t.jsx)("input",{ref:r,id:p,className:(0,n.cn)("input",l&&"input-error",o&&"pl-10",c&&"pr-10",d),required:m,...h}),c&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400",children:c})]}),l&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-error",children:l}),i&&!l&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-gray-500",children:i})]})});l.displayName="Input",r.Z=l},6857:function(e,r,s){"use strict";s.d(r,{cn:function(){return a}});var t=s(1994);function a(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.W)(r)}},3145:function(e,r,s){"use strict";s.d(r,{default:function(){return a.a}});var t=s(8461),a=s.n(t)},9376:function(e,r,s){"use strict";var t=s(5475);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},8461:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var s in r)Object.defineProperty(e,s,{enumerable:!0,get:r[s]})}(r,{default:function(){return o},getImageProps:function(){return i}});let t=s(7043),a=s(5346),n=s(5878),l=t._(s(5084));function i(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(r))void 0===s&&delete r[e];return{props:r}}let o=n.Image}},function(e){e.O(0,[9956,2972,5878,9064,9502,5883,8036,653,2971,2117,1744],function(){return e(e.s=8786)}),_N_E=e.O()}]);