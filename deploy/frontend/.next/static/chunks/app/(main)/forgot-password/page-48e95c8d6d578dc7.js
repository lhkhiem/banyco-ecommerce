(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9461],{5966:function(e,t,r){Promise.resolve().then(r.bind(r,8604))},8604:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),s=r(2265),n=r(7648),i=r(3145),l=r(9501),o=r(7996),c=r(2709),u=r(7194),d=r(3414),m=r(9064);function h(){var e;let[t,r]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),{register:f,handleSubmit:g,formState:{errors:v}}=(0,l.cI)(),x=async e=>{r(!0);try{await (0,d.gF)(e.email),p(!0),m.ZP.success("Email đặt lại mật khẩu đ\xe3 được gửi!")}catch(r){var t,a;console.error("Forgot password error:",r);let e=(null==r?void 0:null===(a=r.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||(null==r?void 0:r.message)||"C\xf3 lỗi xảy ra. Vui l\xf2ng thử lại.";m.ZP.error(e)}finally{r(!1)}};return h?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 pt-[120px] pb-16",children:(0,a.jsx)("div",{className:"container-custom",children:(0,a.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,a.jsx)("div",{className:"mb-8 text-center",children:(0,a.jsx)(n.default,{href:"/",className:"inline-block",children:(0,a.jsx)(i.default,{src:"/images/banyco-logo.jpg",alt:"Logo",width:150,height:75,className:"mx-auto h-auto w-auto"})})}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-8 shadow-xl text-center",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:(0,a.jsx)(o._rq,{className:"h-8 w-8 text-green-600"})})}),(0,a.jsx)("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:"Email đ\xe3 được gửi!"}),(0,a.jsx)("p",{className:"mb-8 text-gray-600",children:"Ch\xfang t\xf4i đ\xe3 gửi link đặt lại mật khẩu đến email của bạn. Vui l\xf2ng kiểm tra hộp thư v\xe0 l\xe0m theo hướng dẫn."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c.Z,{href:"/login",size:"lg",fullWidth:!0,children:"Quay lại đăng nhập"}),(0,a.jsx)(n.default,{href:"/",className:"block text-sm text-gray-600 hover:text-gray-900",children:"← Quay lại trang chủ"})]})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 pt-[120px] pb-16",children:(0,a.jsx)("div",{className:"container-custom",children:(0,a.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,a.jsx)("div",{className:"mb-8 text-center",children:(0,a.jsx)(n.default,{href:"/",className:"inline-block",children:(0,a.jsx)(i.default,{src:"/images/banyco-logo.jpg",alt:"Logo",width:150,height:75,className:"mx-auto h-auto w-auto"})})}),(0,a.jsxs)("div",{className:"rounded-2xl bg-white p-8 shadow-xl",children:[(0,a.jsx)("h1",{className:"mb-2 text-3xl font-bold text-gray-900",children:"Qu\xean mật khẩu"}),(0,a.jsx)("p",{className:"mb-8 text-gray-600",children:"Nhập email của bạn v\xe0 ch\xfang t\xf4i sẽ gửi link đặt lại mật khẩu."}),(0,a.jsxs)("form",{onSubmit:g(x),className:"space-y-6",children:[(0,a.jsx)(u.Z,{label:"Email",type:"email",placeholder:"your.email@example.com",leftIcon:(0,a.jsx)(o.Imn,{className:"h-5 w-5"}),error:null===(e=v.email)||void 0===e?void 0:e.message,required:!0,...f("email",{required:"Email l\xe0 bắt buộc",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email kh\xf4ng hợp lệ"}})}),(0,a.jsx)(c.Z,{type:"submit",size:"lg",fullWidth:!0,isLoading:t,disabled:t,children:"Gửi link đặt lại mật khẩu"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)(n.default,{href:"/login",className:"text-sm font-medium text-brand-purple-600 hover:text-brand-purple-700",children:"← Quay lại đăng nhập"})})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)(n.default,{href:"/",className:"text-sm text-gray-600 hover:text-gray-900",children:"← Quay lại trang chủ"})})]})})})}},2709:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(7437),s=r(7648),n=r(6857);function i(e){let{children:t,variant:r="primary",size:i="md",isLoading:l=!1,fullWidth:o=!1,className:c,disabled:u,href:d,...m}=e,h=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[r],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],o&&"w-full",(u||l)&&"opacity-50 cursor-not-allowed",c),p=l?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):t;return d?(0,a.jsx)(s.default,{href:d,legacyBehavior:!0,passHref:!0,children:(0,a.jsx)("a",{className:h,children:p})}):(0,a.jsx)("button",{className:h,disabled:u||l,...m,children:p})}},7194:function(e,t,r){"use strict";var a=r(7437),s=r(2265),n=r(6857);let i=(0,s.forwardRef)((e,t)=>{let{label:r,error:i,helperText:l,leftIcon:o,rightIcon:c,className:u,id:d,required:m,...h}=e,p=(0,s.useId)(),f=null!=d?d:p;return(0,a.jsxs)("div",{className:"w-full",children:[r&&(0,a.jsxs)("label",{htmlFor:f,className:"mb-1.5 block text-sm font-medium text-gray-700",children:[r,m&&(0,a.jsx)("span",{className:"ml-1 text-error",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[o&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:o}),(0,a.jsx)("input",{ref:t,id:f,className:(0,n.cn)("input",i&&"input-error",o&&"pl-10",c&&"pr-10",u),required:m,...h}),c&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400",children:c})]}),i&&(0,a.jsx)("p",{className:"mt-1.5 text-sm text-error",children:i}),l&&!i&&(0,a.jsx)("p",{className:"mt-1.5 text-sm text-gray-500",children:l})]})});i.displayName="Input",t.Z=i},1971:function(e,t,r){"use strict";r.d(t,{f8:function(){return d},kG:function(){return c},uD:function(){return m}}),r(257);let a="/api",s=e=>e?e.replace(/\/+$/,""):"",n=e=>e?e.startsWith("/")?e:"/".concat(e):"",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=s(e);return t?"".concat(r).concat(n(t)):r},l=()=>{let e=s("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:i(e,a);let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t).concat(a)}{let{protocol:e,hostname:t}=window.location;return i("".concat(e,"//").concat(t).concat(":".concat("443")),a)}},o=e=>s(e).replace(/\/api$/,""),c=()=>l(),u=()=>o(l()),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(l(),e)},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(u(),e)}},3414:function(e,t,r){"use strict";r.d(t,{gF:function(){return c},kS:function(){return o},x4:function(){return i},z2:function(){return l}});var a=r(3405),s=r(2780);let n=e=>{if(e.firstName||e.lastName)return{firstName:e.firstName||"",lastName:e.lastName||""};if(e.name){let t=e.name.trim().split(/\s+/);if(t.length>=2)return{lastName:t[0],firstName:t.slice(1).join(" ")};if(1===t.length)return{firstName:t[0],lastName:""}}return{firstName:"",lastName:""}},i=async e=>{try{let t=await a.Z.post(s.P.AUTH.LOGIN,e),r=t.data.data.user;if(r.name&&!r.firstName&&!r.lastName){let{firstName:e,lastName:a}=n(r);t.data.data.user={...t.data.data.user,firstName:e,lastName:a},console.warn('[login] ⚠️ Backend should return "firstName" and "lastName" instead of "name" for consistency')}return t.data.data}catch(e){var t,r,i,l,o,c;throw console.error("[login] Login error details:",{message:null==e?void 0:e.message,response:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data,status:null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status,url:null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.url,baseURL:null==e?void 0:null===(l=e.config)||void 0===l?void 0:l.baseURL,fullURL:(null==e?void 0:null===(o=e.config)||void 0===o?void 0:o.baseURL)+(null==e?void 0:null===(c=e.config)||void 0===c?void 0:c.url)}),e}},l=async e=>{try{let t=await a.Z.post(s.P.AUTH.REGISTER,{email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,phone:e.phone||void 0}),r=t.data.data.user;if(r.name&&!r.firstName&&!r.lastName){let{firstName:e,lastName:a}=n(r);t.data.data.user={...t.data.data.user,firstName:e,lastName:a},console.warn('[register] ⚠️ Backend should return "firstName" and "lastName" instead of "name" for consistency')}return t.data.data}catch(e){var t,r,i,l,o,c;throw console.error("[register] Register error details:",{message:null==e?void 0:e.message,response:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data,status:null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status,url:null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.url,baseURL:null==e?void 0:null===(l=e.config)||void 0===l?void 0:l.baseURL,fullURL:(null==e?void 0:null===(o=e.config)||void 0===o?void 0:o.baseURL)+(null==e?void 0:null===(c=e.config)||void 0===c?void 0:c.url)}),e}},o=async()=>{try{await a.Z.post(s.P.AUTH.LOGOUT)}catch(e){console.error("Logout error:",e)}},c=async e=>{await a.Z.post(s.P.AUTH.FORGOT_PASSWORD,{email:e})}},3405:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var a=r(3464),s=r(1971);let n=a.Z.create({baseURL:(0,s.kG)(),timeout:3e4,headers:{"Content-Type":"application/json"}});function i(e){if(a.Z.isAxiosError(e)){if(e.response){let t=e.response.data;return(null==t?void 0:t.code)==="INSUFFICIENT_STOCK"?'Sản phẩm "'.concat(t.productName,'" kh\xf4ng đủ số lượng. C\xf2n lại: ').concat(t.availableStock,", Bạn y\xeau cầu: ").concat(t.requestedQuantity):(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Đ\xe3 xảy ra lỗi khi xử l\xfd y\xeau cầu"}if(e.request)return"Kh\xf4ng c\xf3 phản hồi từ server. Vui l\xf2ng kiểm tra kết nối của bạn."}return"Đ\xe3 xảy ra lỗi kh\xf4ng mong muốn"}n.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){r._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await a.Z.post("".concat((0,s.kG)(),"/public/auth/refresh"),{refreshToken:e})).data.data;return localStorage.setItem("accessToken",t),r.headers&&(r.headers.Authorization="Bearer ".concat(t)),n(r)}}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=n},2780:function(e,t,r){"use strict";r.d(t,{P:function(){return a}});let a={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",VERIFY_EMAIL:"/auth/verify-email",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",ME:"/auth/me"},PRODUCTS:{LIST:"/products",DETAIL:e=>"/products/".concat(e),SEARCH:"/products/search",FEATURED:"/products/featured",BEST_SELLERS:"/products/best-sellers",NEW_ARRIVALS:"/products/new-arrivals",RELATED:e=>"/products/".concat(e,"/related"),REVIEWS:e=>"/products/".concat(e,"/reviews")},CATEGORIES:{LIST:"/product-categories",DETAIL:e=>"/product-categories/slug/".concat(e),TREE:"/product-categories/tree",PRODUCTS:e=>"/product-categories/".concat(e,"/products")},BRANDS:{LIST:"/brands",DETAIL:e=>"/brands/slug/".concat(e),PRODUCTS:e=>"/brands/".concat(e,"/products")},CART:{GET:"/public/cart",ADD:"/public/cart/add",UPDATE:"/public/cart/update",REMOVE:"/public/cart/remove",CLEAR:"/public/cart/clear",APPLY_PROMO:"/public/cart/promo"},ORDERS:{LIST:"/public/orders",DETAIL:e=>"/public/orders/".concat(e),CREATE:"/orders",CANCEL:e=>"/public/orders/".concat(e,"/cancel")},USER:{PROFILE:"/public/user/profile",UPDATE_PROFILE:"/public/user/profile",ADDRESSES:"/public/user/addresses",ADD_ADDRESS:"/public/user/addresses",UPDATE_ADDRESS:e=>"/public/user/addresses/".concat(e),DELETE_ADDRESS:e=>"/public/user/addresses/".concat(e),WISHLIST:"/public/user/wishlist",ADD_TO_WISHLIST:"/public/user/wishlist/add",REMOVE_FROM_WISHLIST:"/public/user/wishlist/remove"},SEARCH:{PRODUCTS:"/search/products",SUGGESTIONS:"/search/suggestions"},NEWSLETTER:{SUBSCRIBE:"/newsletter/subscribe"},CONTACTS:{SUBMIT:"/contacts"},ANALYTICS:{TRACK:"/analytics/track"},POSTS:{LIST:"/public/posts",DETAIL:e=>"/public/posts/".concat(e),RELATED:e=>"/public/posts/".concat(e,"/related")},ABOUT:{SECTIONS:"/about-sections",SECTION_BY_KEY:e=>"/about-sections/key/".concat(e)},TRACKING:{ACTIVE_SCRIPTS:"/tracking-scripts/active"}}},6857:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(1994);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.W)(t)}},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(8461),s=r.n(a)},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let a=r(7043),s=r(5346),n=r(5878),i=a._(r(5084));function l(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=n.Image}},function(e){e.O(0,[9956,2972,5878,9064,9502,8036,2971,2117,1744],function(){return e(e.s=5966)}),_N_E=e.O()}]);