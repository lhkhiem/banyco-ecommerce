(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9030],{8152:function(e,t,a){Promise.resolve().then(a.bind(a,7663))},7663:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N},dynamic:function(){return v}});var r=a(7437),n=a(2265),l=a(9376),s=a(7648),o=a(3145),c=a(3276),i=a(7210),d=a(2709),u=a(7297),p=a(1971);a(3405);var h=a(4911);let g=async e=>{try{var t,a,r,n;let l=new URLSearchParams;(null==e?void 0:e.page)&&l.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&l.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.post_type)&&l.append("post_type",e.post_type),(null==e?void 0:e.featured_only)&&l.append("featured_only","true"),(null==e?void 0:e.topic)&&l.append("topic",e.topic),(null==e?void 0:e.category)&&l.append("category",e.category),(null==e?void 0:e.q)&&l.append("q",e.q);let s=l.toString(),o=(0,p.f8)("/public/posts".concat(s?"?".concat(s):"")),c=await fetch(o,{cache:"no-store",headers:{"Content-Type":"application/json"}});if(!c.ok)return console.error("[fetchPosts] Failed to fetch posts",c.statusText),{data:[],meta:{total:0,page:(null==e?void 0:e.page)||1,pageSize:(null==e?void 0:e.pageSize)||20,totalPages:0}};let i=await c.json(),d=[],u=0,g=(null==e?void 0:e.page)||1,m=(null==e?void 0:e.pageSize)||20;i.success&&Array.isArray(i.data)?(d=i.data,u=i.total||d.length,g=i.page||g,m=i.pageSize||m):i.data&&Array.isArray(i.data)?(d=i.data,u=i.total||(null===(a=i.data)||void 0===a?void 0:a.total)||d.length,g=i.page||(null===(r=i.data)||void 0===r?void 0:r.page)||g,m=i.pageSize||(null===(n=i.data)||void 0===n?void 0:n.pageSize)||m):(null===(t=i.data)||void 0===t?void 0:t.data)&&Array.isArray(i.data.data)&&(d=i.data.data,u=i.data.total||d.length,g=i.data.page||g,m=i.data.pageSize||m);let x=Math.ceil(u/m);return{data:d.map(e=>{var t,a,r,n,l;let s=null;e.topics&&Array.isArray(e.topics)&&e.topics.length>0?s=e.topics[0].name||e.topics[0]:e.topic?s="string"==typeof e.topic?e.topic:null===(l=e.topic)||void 0===l?void 0:l.name:(null===(t=e.category)||void 0===t?void 0:t.name)&&(s=e.category.name);let o=[];return e.tags&&Array.isArray(e.tags)?o=e.tags.map(e=>"string"==typeof e?e:e.name||e).filter(Boolean):e.tag_list&&Array.isArray(e.tag_list)&&(o=e.tag_list),{id:e.id,title:e.title,slug:e.slug,excerpt:e.excerpt||e.description||null,readTime:e.read_time||e.readTime||null,category:(null===(a=e.category)||void 0===a?void 0:a.name)||e.category||null,topic:s,tags:o,imageUrl:(0,h.ZJ)((null===(r=e.cover_asset)||void 0===r?void 0:r.url)||(null===(n=e.cover_asset)||void 0===n?void 0:n.cdn_url)||e.image_url||e.cover_image||e.image),publishedAt:e.published_at||e.publishedAt||e.created_at||null}}),meta:{total:u,page:g,pageSize:m,totalPages:x}}}catch(t){return console.error("[fetchPosts] Error:",t),{data:[],meta:{total:0,page:(null==e?void 0:e.page)||1,pageSize:(null==e?void 0:e.pageSize)||20,totalPages:0}}}};var m=a(7996);function x(e){let{topics:t,selectedTopic:a,onTopicClick:n}=e;return(0,r.jsxs)("div",{className:"mb-8 flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>null==n?void 0:n(null),className:"rounded-full border-2 px-4 py-2 text-sm font-medium transition-all shadow-sm ".concat(a?"border-red-200 bg-red-50/80 text-red-800 hover:border-red-300 hover:bg-red-100 hover:text-red-900":"border-red-700 bg-red-700 text-white hover:bg-red-800 hover:border-red-800"),children:"All Topics"}),t.map(e=>(0,r.jsx)("button",{onClick:()=>null==n?void 0:n(e),className:"rounded-full border-2 px-4 py-2 text-sm font-medium transition-all ".concat(a===e?"border-red-700 bg-red-700 text-white hover:bg-red-800 hover:border-red-800 shadow-sm":"border-red-200 bg-red-50/80 text-red-800 hover:border-red-300 hover:bg-red-100 hover:text-red-900"),children:e},e))]})}function f(e){let{totalPages:t,currentPage:a=1}=e;return t<=1?null:(0,r.jsx)("div",{className:"mt-12 flex justify-center gap-2",children:Array.from({length:t},(e,t)=>t+1).map(e=>{let t=e===a;return(0,r.jsx)(s.default,{href:"/posts?page=".concat(e),className:"rounded-lg border px-4 py-2 text-sm font-medium transition-all ".concat(t?"border-red-700 bg-red-700 text-white shadow-sm hover:bg-red-800":"border-red-200 bg-red-50/80 text-red-800 hover:border-red-300 hover:bg-red-100 hover:text-red-900"),children:e},e)})})}var b=a(7087);let v="force-dynamic",y=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:(0,p.uD)(e):"/images/placeholder-image.svg",j=e=>{if(!e)return"";try{let t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric"}).format(t)}catch(e){return""}},w=e=>{let{post:t,onTopicClick:a,onTagClick:n}=e;return(0,r.jsxs)(s.default,{href:"/posts/".concat(t.slug),className:"group block overflow-hidden rounded-lg bg-white shadow-md transition-all hover:shadow-xl",children:[(0,r.jsx)("div",{className:"relative h-48 overflow-hidden bg-gray-200",children:(0,r.jsx)(o.default,{src:y(t.imageUrl),alt:t.title,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"})}),(0,r.jsxs)("div",{className:"p-6",children:[t.topic&&(0,r.jsx)("span",{className:"mb-2 inline-block rounded-full bg-red-100/80 px-3 py-1 text-xs font-semibold text-red-800",children:t.topic}),(0,r.jsx)("h3",{className:"mb-2 text-xl font-semibold text-gray-900 group-hover:text-red-700 line-clamp-2 transition-colors",children:t.title}),t.excerpt&&(0,r.jsx)("p",{className:"mb-4 text-sm text-gray-600 line-clamp-3",children:t.excerpt}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-3",children:[t.readTime&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.TCC,{className:"mr-1 h-3 w-3"}),(0,r.jsx)("span",{children:t.readTime})]}),t.publishedAt&&(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{children:j(t.publishedAt)})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-xs",children:[t.topic&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Topics:"}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a(t.topic)},className:"text-red-700 hover:text-red-900 hover:underline",children:t.topic})]}),t.tags&&t.tags.length>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"Tags:"}),t.tags.map((e,a)=>(0,r.jsxs)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),null==n||n(e)},className:"text-red-700 hover:text-red-900 hover:underline",children:[e,a<t.tags.length-1?",":""]},e))]})]})]})]})};function N(){let e=(0,l.useSearchParams)(),[t,a]=(0,n.useState)([]),[s,o]=(0,n.useState)(!0),[p,h]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),[j,N]=(0,n.useState)(null),[k,S]=(0,n.useState)([]),[_,A]=(0,n.useState)([]),[C,T]=(0,n.useState)({total:0,page:1,pageSize:24,totalPages:0});(0,n.useEffect)(()=>{let t=e.get("topic");t&&(y(decodeURIComponent(t)),h(!0))},[e]),(0,n.useEffect)(()=>{(async()=>{try{let e=(await g({pageSize:1e3,post_type:"blog"})).data||[],t=new Set,a=new Set;e.forEach(e=>{e.topic&&t.add(e.topic),e.tags&&e.tags.forEach(e=>a.add(e))}),S(Array.from(t).sort()),A(Array.from(a).sort())}catch(e){console.error("Failed to load topics/tags:",e)}})()},[]),(0,n.useEffect)(()=>{z()},[p,v,j]);let z=async()=>{o(!0);try{let e={pageSize:24,post_type:"blog"};p||v||j||(e.featured_only=!0);let t=await g(e),r=t.data||[];v&&(r=r.filter(e=>e.topic===v)),j&&(r=r.filter(e=>e.tags&&e.tags.includes(j))),a(r),T(t.meta)}catch(e){console.error("Failed to load posts:",e),a([])}finally{o(!1)}},P=e=>{y(e),N(null)},I=e=>{N(j===e?null:e),y(null)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(u.default,{backgroundImage:b.c.postsHero,overlay:!0,overlayColor:"bg-black",overlayOpacity:"bg-opacity-60",children:(0,r.jsx)("div",{className:"text-center text-white",children:(0,r.jsxs)(i.default,{children:[(0,r.jsx)("h1",{className:"mb-4 text-4xl font-bold md:text-5xl drop-shadow-lg",children:"B\xe0i Viết & Tin Tức"}),(0,r.jsx)("p",{className:"max-w-2xl mx-auto text-lg drop-shadow-md",children:"Cập nhật những th\xf4ng tin mới nhất về sản phẩm spa, kiến thức chăm s\xf3c sắc đẹp v\xe0 xu hướng ng\xe0nh l\xe0m đẹp"})]})})}),(0,r.jsxs)("div",{className:"container-custom py-12",children:[(0,r.jsx)(c.Z,{items:[{label:"Home",href:"/"},{label:"Blog",href:"/posts"}],className:"mb-8"}),k.length>0&&(0,r.jsx)(i.default,{children:(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(x,{topics:k,selectedTopic:v,onTopicClick:P})})}),s?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading posts..."})}):t.length>0?(0,r.jsx)("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:t.map((e,t)=>(0,r.jsx)(i.default,{delay:50*t,children:(0,r.jsx)(w,{post:e,onTopicClick:P,onTagClick:I})},e.id))}):(0,r.jsxs)("div",{className:"rounded-lg bg-gray-50 p-12 text-center",children:[(0,r.jsx)(m.E25,{className:"mx-auto mb-4 h-16 w-16 text-gray-400"}),(0,r.jsx)("h3",{className:"mb-2 text-xl font-semibold text-gray-900",children:"No posts found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Check back soon for new articles!"})]}),!p&&t.length>0&&(0,r.jsx)(i.default,{children:(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)(d.Z,{onClick:()=>{h(!0),y(null),N(null)},size:"lg",className:"bg-red-700 text-white hover:bg-red-800 shadow-lg transition-all",children:"Xem tất cả b\xe0i viết"})})}),p&&C.totalPages>1&&(0,r.jsx)(i.default,{children:(0,r.jsx)(f,{totalPages:C.totalPages})})]})]})}},3276:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(7437),n=a(7648);function l(e){let{items:t,className:a=""}=e;return(0,r.jsx)("nav",{className:"flex ".concat(a),"aria-label":"Breadcrumb",children:(0,r.jsx)("ol",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-sm",children:t.map((e,a)=>(0,r.jsxs)("li",{className:"flex items-center",children:[a>0&&(0,r.jsx)("svg",{className:"mx-2 h-4 w-4 shrink-0 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href&&a<t.length-1?(0,r.jsx)(n.default,{href:e.href,className:"break-words text-gray-600 hover:text-brand-purple-600",children:e.label}):(0,r.jsx)("span",{className:"break-words font-medium text-gray-900",children:e.label})]},a))})})}},2709:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(7437),n=a(7648),l=a(6857);function s(e){let{children:t,variant:a="primary",size:s="md",isLoading:o=!1,fullWidth:c=!1,className:i,disabled:d,href:u,...p}=e,h=(0,l.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[a],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[s],c&&"w-full",(d||o)&&"opacity-50 cursor-not-allowed",i),g=o?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):t;return u?(0,r.jsx)(n.default,{href:u,legacyBehavior:!0,passHref:!0,children:(0,r.jsx)("a",{className:h,children:g})}):(0,r.jsx)("button",{className:h,disabled:d||o,...p,children:g})}},7210:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var r=a(7437),n=a(2265);function l(e){let{children:t,delay:a=0,direction:l="up",className:s=""}=e,[o,c]=(0,n.useState)(!1),i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&setTimeout(()=>{c(!0)},a)},{threshold:.1,rootMargin:"50px"});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}},[a]),(0,r.jsx)("div",{ref:i,className:s,style:{opacity:o?1:0,transform:(()=>{if(o)return"translate(0, 0)";switch(l){case"up":default:return"translate(0, 40px)";case"down":return"translate(0, -40px)";case"left":return"translate(40px, 0)";case"right":return"translate(-40px, 0)"}})(),transition:"opacity 0.8s ease-out, transform 0.8s ease-out",willChange:o?"auto":"opacity, transform"},children:t})}},7297:function(e,t,a){"use strict";a.d(t,{default:function(){return s}});var r=a(7437),n=a(29),l=a.n(n);function s(e){let{backgroundImage:t,children:a,minHeight:n="tall",overlay:s=!0,overlayColor:o="bg-black",overlayOpacity:c="bg-opacity-60",className:i=""}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{style:{backgroundImage:"url(".concat(t,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll"},className:"jsx-a6f8997df51b470b "+"parallax-section relative overflow-hidden ".concat({full:"min-h-screen",tall:"min-h-[40vh] sm:min-h-[50vh] lg:min-h-[60vh]",medium:"min-h-[30vh] sm:min-h-[40vh] lg:min-h-[50vh]",short:"min-h-[25vh] sm:min-h-[30vh] lg:min-h-[40vh]"}[n]," ").concat(i),children:[s&&(0,r.jsx)("div",{className:"jsx-a6f8997df51b470b "+"absolute inset-0 ".concat(o," ").concat(c)}),(0,r.jsx)("div",{className:"jsx-a6f8997df51b470b parallax-inner relative z-10 flex items-center justify-center min-h-[inherit] w-full px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsx)("div",{className:"jsx-a6f8997df51b470b max-w-7xl mx-auto w-full",children:a})})]}),(0,r.jsx)(l(),{id:"a6f8997df51b470b",children:".parallax-section.jsx-a6f8997df51b470b{background-attachment:scroll}@media(min-width:1024px){.parallax-section.jsx-a6f8997df51b470b{background-attachment:fixed}}"})]})}a(2265)},1971:function(e,t,a){"use strict";a.d(t,{f8:function(){return u},kG:function(){return i},uD:function(){return p}}),a(257);let r="/api",n=e=>e?e.replace(/\/+$/,""):"",l=e=>e?e.startsWith("/")?e:"/".concat(e):"",s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=n(e);return t?"".concat(a).concat(l(t)):a},o=()=>{let e=n("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:s(e,r);let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t).concat(r)}{let{protocol:e,hostname:t}=window.location;return s("".concat(e,"//").concat(t).concat(":".concat("443")),r)}},c=e=>n(e).replace(/\/api$/,""),i=()=>o(),d=()=>c(o()),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s(o(),e)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s(d(),e)}},3405:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(3464),n=a(1971);let l=r.Z.create({baseURL:(0,n.kG)(),timeout:3e4,headers:{"Content-Type":"application/json"}});function s(e){if(r.Z.isAxiosError(e)){if(e.response){let t=e.response.data;return(null==t?void 0:t.code)==="INSUFFICIENT_STOCK"?'Sản phẩm "'.concat(t.productName,'" kh\xf4ng đủ số lượng. C\xf2n lại: ').concat(t.availableStock,", Bạn y\xeau cầu: ").concat(t.requestedQuantity):(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Đ\xe3 xảy ra lỗi khi xử l\xfd y\xeau cầu"}if(e.request)return"Kh\xf4ng c\xf3 phản hồi từ server. Vui l\xf2ng kiểm tra kết nối của bạn."}return"Đ\xe3 xảy ra lỗi kh\xf4ng mong muốn"}l.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:t}=(await r.Z.post("".concat((0,n.kG)(),"/public/auth/refresh"),{refreshToken:e})).data.data;return localStorage.setItem("accessToken",t),a.headers&&(a.headers.Authorization="Bearer ".concat(t)),l(a)}}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=l},7087:function(e,t,a){"use strict";a.d(t,{c:function(){return r}});let r={aboutHero:"/images/backgrounds/about-hero.webp",contactHero:"/images/backgrounds/contact-hero.webp",faqsHero:"/images/backgrounds/faqs-hero.webp",postsHero:"/images/backgrounds/posts-hero.webp",shippingHero:"/images/backgrounds/shipping-hero.webp",contactFormBg:"/images/backgrounds/contact-form-bg.webp",brandShowcaseBg:"/images/backgrounds/brand-showcase-bg.webp"}},4911:function(e,t,a){"use strict";a.d(t,{ZJ:function(){return c}});let r=()=>"ecommerce-api.banyco.vn",n=()=>{let e=r();{let t=window.location.protocol;return"".concat(t,"//").concat(e)}},l=e=>{let t=e.match(/https?:\/\/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(:\d+)?/);if(t){let a=n();return e.replace(t[0],a)}return e},s=()=>{{let e="ecommerce-api.banyco.vn";if(e){let t=window.location.protocol;return"".concat(t,"//").concat(e)}return"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat("443")}},o=()=>!0,c=e=>{let t;if(!e||"string"!=typeof e)return null;let a=e.replace(/\\/g,"/"),r=s(),n=o();return a.startsWith("http://")||a.startsWith("https://")?(((t=a).includes("localhost")||t.includes("127.0.0.1"))&&(t=(t=t.replace(/https?:\/\/localhost(:\d+)?/gi,r)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,r)),t=l(t)):t="".concat(r).concat(a.startsWith("/")?"":"/").concat(a),(t=t.replace(/\/upload\/(?!s)/g,"/uploads/")).startsWith("http://")&&n&&(t=t.replace("http://","https://")),n&&(t.includes("localhost")||t.includes("127.0.0.1"))&&(console.warn("[normalizeMediaUrl] Found localhost in production, replacing: ".concat(t)),t=(t=t.replace(/https?:\/\/localhost(:\d+)?/gi,r)).replace(/https?:\/\/127\.0\.0\.1(:\d+)?/gi,r)),t}},6857:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(1994);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.W)(t)}}},function(e){e.O(0,[9956,2972,5878,9502,8612,2971,2117,1744],function(){return e(e.s=8152)}),_N_E=e.O()}]);