(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8574],{6704:function(e,s,t){Promise.resolve().then(t.bind(t,7770))},7770:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f},dynamic:function(){return p}});var r=t(7437),a=t(2265),n=t(9376),i=t(3145),c=t(7996),d=t(2709),l=t(3276),o=t(9693),u=t(9064);let p="force-dynamic",h=e=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[e],m=e=>({pending:"Chờ xử l\xfd",processing:"Đang xử l\xfd",shipped:"Đ\xe3 gửi h\xe0ng",delivered:"Đ\xe3 giao h\xe0ng",cancelled:"Đ\xe3 hủy",refunded:"Đ\xe3 ho\xe0n tiền"})[e]||e,g=e=>{let s=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Ho_Chi_Minh"}).format(s)},x=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);function f(){let e=(0,n.useParams)().id,[s,t]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let s=async()=>{f(!0);try{let s=await (0,o.G7)(e);t(s)}catch(e){var s,r;console.error("Failed to fetch order:",e),(null===(s=e.response)||void 0===s?void 0:s.status)===401?u.ZP.error("Vui l\xf2ng đăng nhập để xem đơn h\xe0ng"):(null===(r=e.response)||void 0===r?void 0:r.status)===404?u.ZP.error("Đơn h\xe0ng kh\xf4ng tồn tại"):u.ZP.error("Kh\xf4ng thể tải th\xf4ng tin đơn h\xe0ng")}finally{f(!1)}};e&&s()},[e]);let b=[{label:"Trang chủ",href:"/"},{label:"T\xe0i khoản",href:"/account"},{label:"Đơn h\xe0ng",href:"/account/orders"},{label:(null==s?void 0:s.orderNumber)||"Chi tiết đơn h\xe0ng",href:"#"}];return p?(0,r.jsx)("div",{className:"card p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-purple-600 border-t-transparent"})})}):s?(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Z,{items:b,className:"mb-6"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"mb-2 text-2xl font-bold text-gray-900",children:["Đơn h\xe0ng #",s.orderNumber]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Đặt h\xe0ng v\xe0o ",g(s.createdAt)]})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)("span",{className:"rounded-full px-4 py-2 text-sm font-semibold ".concat(h(s.status)),children:m(s.status)})})]}),s.trackingNumber&&(0,r.jsx)("div",{className:"rounded-lg bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(c.C4B,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"M\xe3 vận đơn:"}),(0,r.jsx)("span",{className:"font-mono text-brand-purple-600",children:s.trackingNumber})]})})]}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsx)("h2",{className:"mb-6 text-xl font-bold text-gray-900",children:"Sản phẩm"}),(0,r.jsx)("div",{className:"space-y-4",children:s.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4 border-b border-gray-200 pb-4 last:border-0",children:[(0,r.jsx)("div",{className:"relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg bg-gray-100",children:(0,r.jsx)(i.default,{src:e.productImage||"/images/placeholder-image.svg",alt:e.productName,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.productName}),e.variantName&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Variant: ",e.variantName]}),e.sku&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["SKU: ",e.sku]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Số lượng: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:x(e.total)}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[x(e.price)," mỗi sản phẩm"]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsxs)("h2",{className:"mb-4 flex items-center gap-2 text-xl font-bold text-gray-900",children:[(0,r.jsx)(c.i63,{className:"h-5 w-5"}),"Địa chỉ giao h\xe0ng"]}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-gray-700",children:[(0,r.jsxs)("p",{className:"font-semibold",children:[s.shippingAddress.firstName," ",s.shippingAddress.lastName]}),(0,r.jsx)("p",{children:s.shippingAddress.addressLine1}),s.shippingAddress.addressLine2&&(0,r.jsx)("p",{children:s.shippingAddress.addressLine2}),(0,r.jsxs)("p",{children:[s.shippingAddress.city,", ",s.shippingAddress.state," ",s.shippingAddress.postalCode]}),(0,r.jsx)("p",{children:s.shippingAddress.country}),s.shippingAddress.phone&&(0,r.jsxs)("p",{className:"mt-2 flex items-center gap-1",children:[(0,r.jsx)(c.tUt,{className:"h-4 w-4"}),s.shippingAddress.phone]})]})]}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"Th\xf4ng tin thanh to\xe1n"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Phương thức:"})," ",s.paymentMethod]}),s.billingAddress&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"mb-2 font-medium",children:"Địa chỉ thanh to\xe1n:"}),(0,r.jsxs)("p",{children:[s.billingAddress.firstName," ",s.billingAddress.lastName]}),(0,r.jsx)("p",{children:s.billingAddress.addressLine1}),(0,r.jsxs)("p",{children:[s.billingAddress.city,", ",s.billingAddress.state," ",s.billingAddress.postalCode]}),(0,r.jsx)("p",{children:s.billingAddress.country})]})]})]})]}),(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsx)("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"T\xf3m tắt đơn h\xe0ng"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tạm t\xednh"}),(0,r.jsx)("span",{className:"text-gray-900",children:x(s.subtotal)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Ph\xed vận chuyển"}),(0,r.jsx)("span",{className:"text-gray-900",children:x(s.shipping)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Thuế"}),(0,r.jsx)("span",{className:"text-gray-900",children:x(s.tax)})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"Tổng cộng"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:x(s.total)})]})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(d.Z,{href:"/account/orders",variant:"outline",children:"Quay lại danh s\xe1ch"}),"delivered"===s.status&&(0,r.jsx)(d.Z,{children:"Mua lại"})]})]})]}):(0,r.jsx)("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"py-12 text-center",children:[(0,r.jsx)("h2",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Đơn h\xe0ng kh\xf4ng tồn tại"}),(0,r.jsx)(d.Z,{href:"/account/orders",children:"Quay lại danh s\xe1ch đơn h\xe0ng"})]})})}},3276:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(7437),a=t(7648);function n(e){let{items:s,className:t=""}=e;return(0,r.jsx)("nav",{className:"flex ".concat(t),"aria-label":"Breadcrumb",children:(0,r.jsx)("ol",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-sm",children:s.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)("svg",{className:"mx-2 h-4 w-4 shrink-0 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href&&t<s.length-1?(0,r.jsx)(a.default,{href:e.href,className:"break-words text-gray-600 hover:text-brand-purple-600",children:e.label}):(0,r.jsx)("span",{className:"break-words font-medium text-gray-900",children:e.label})]},t))})})}},2709:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var r=t(7437),a=t(7648),n=t(6857);function i(e){let{children:s,variant:t="primary",size:i="md",isLoading:c=!1,fullWidth:d=!1,className:l,disabled:o,href:u,...p}=e,h=(0,n.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[t],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[i],d&&"w-full",(o||c)&&"opacity-50 cursor-not-allowed",l),m=c?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):s;return u?(0,r.jsx)(a.default,{href:u,legacyBehavior:!0,passHref:!0,children:(0,r.jsx)("a",{className:h,children:m})}):(0,r.jsx)("button",{className:h,disabled:o||c,...p,children:m})}},1971:function(e,s,t){"use strict";t.d(s,{f8:function(){return u},kG:function(){return l},uD:function(){return p}}),t(257);let r="/api",a=e=>e?e.replace(/\/+$/,""):"",n=e=>e?e.startsWith("/")?e:"/".concat(e):"",i=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=a(e);return s?"".concat(t).concat(n(s)):t},c=()=>{let e=a("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:i(e,r);let s="ecommerce-api.banyco.vn";if(s){let e=window.location.protocol;return"".concat(e,"//").concat(s).concat(r)}{let{protocol:e,hostname:s}=window.location;return i("".concat(e,"//").concat(s).concat(":".concat("443")),r)}},d=e=>a(e).replace(/\/api$/,""),l=()=>c(),o=()=>d(c()),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(c(),e)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(o(),e)}},3405:function(e,s,t){"use strict";t.d(s,{z:function(){return i}});var r=t(3464),a=t(1971);let n=r.Z.create({baseURL:(0,a.kG)(),timeout:3e4,headers:{"Content-Type":"application/json"}});function i(e){if(r.Z.isAxiosError(e)){if(e.response){let s=e.response.data;return(null==s?void 0:s.code)==="INSUFFICIENT_STOCK"?'Sản phẩm "'.concat(s.productName,'" kh\xf4ng đủ số lượng. C\xf2n lại: ').concat(s.availableStock,", Bạn y\xeau cầu: ").concat(s.requestedQuantity):(null==s?void 0:s.error)||(null==s?void 0:s.message)||"Đ\xe3 xảy ra lỗi khi xử l\xfd y\xeau cầu"}if(e.request)return"Kh\xf4ng c\xf3 phản hồi từ server. Vui l\xf2ng kiểm tra kết nối của bạn."}return"Đ\xe3 xảy ra lỗi kh\xf4ng mong muốn"}n.interceptors.request.use(e=>{{let s=localStorage.getItem("accessToken");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var s;let t=e.config;if((null===(s=e.response)||void 0===s?void 0:s.status)===401&&!t._retry){t._retry=!0;try{let e=localStorage.getItem("refreshToken");if(e){let{accessToken:s}=(await r.Z.post("".concat((0,a.kG)(),"/public/auth/refresh"),{refreshToken:e})).data.data;return localStorage.setItem("accessToken",s),t.headers&&(t.headers.Authorization="Bearer ".concat(s)),n(t)}}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),s.Z=n},2780:function(e,s,t){"use strict";t.d(s,{P:function(){return r}});let r={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",VERIFY_EMAIL:"/auth/verify-email",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",ME:"/auth/me"},PRODUCTS:{LIST:"/products",DETAIL:e=>"/products/".concat(e),SEARCH:"/products/search",FEATURED:"/products/featured",BEST_SELLERS:"/products/best-sellers",NEW_ARRIVALS:"/products/new-arrivals",RELATED:e=>"/products/".concat(e,"/related"),REVIEWS:e=>"/products/".concat(e,"/reviews")},CATEGORIES:{LIST:"/product-categories",DETAIL:e=>"/product-categories/slug/".concat(e),TREE:"/product-categories/tree",PRODUCTS:e=>"/product-categories/".concat(e,"/products")},BRANDS:{LIST:"/brands",DETAIL:e=>"/brands/slug/".concat(e),PRODUCTS:e=>"/brands/".concat(e,"/products")},CART:{GET:"/public/cart",ADD:"/public/cart/add",UPDATE:"/public/cart/update",REMOVE:"/public/cart/remove",CLEAR:"/public/cart/clear",APPLY_PROMO:"/public/cart/promo"},ORDERS:{LIST:"/public/orders",DETAIL:e=>"/public/orders/".concat(e),CREATE:"/orders",CANCEL:e=>"/public/orders/".concat(e,"/cancel")},USER:{PROFILE:"/public/user/profile",UPDATE_PROFILE:"/public/user/profile",ADDRESSES:"/public/user/addresses",ADD_ADDRESS:"/public/user/addresses",UPDATE_ADDRESS:e=>"/public/user/addresses/".concat(e),DELETE_ADDRESS:e=>"/public/user/addresses/".concat(e),WISHLIST:"/public/user/wishlist",ADD_TO_WISHLIST:"/public/user/wishlist/add",REMOVE_FROM_WISHLIST:"/public/user/wishlist/remove"},SEARCH:{PRODUCTS:"/search/products",SUGGESTIONS:"/search/suggestions"},NEWSLETTER:{SUBSCRIBE:"/newsletter/subscribe"},CONTACTS:{SUBMIT:"/contacts"},ANALYTICS:{TRACK:"/analytics/track"},POSTS:{LIST:"/public/posts",DETAIL:e=>"/public/posts/".concat(e),RELATED:e=>"/public/posts/".concat(e,"/related")},ABOUT:{SECTIONS:"/about-sections",SECTION_BY_KEY:e=>"/about-sections/key/".concat(e)},TRACKING:{ACTIVE_SCRIPTS:"/tracking-scripts/active"}}},9693:function(e,s,t){"use strict";t.d(s,{AU:function(){return i},G7:function(){return c},LV:function(){return d},sl:function(){return l}});var r=t(3405),a=t(2780);let n=e=>({id:e.id,orderNumber:e.order_number,userId:e.customer_id||"",items:e.items.map(e=>({id:e.id,productId:e.product_id,productName:e.product_name,productImage:e.product_image_url||"/images/placeholder-image.svg",variantId:e.variant_info?String(e.variant_info.id||""):void 0,variantName:e.variant_info?String(e.variant_info.name||""):void 0,sku:e.product_sku||"",quantity:e.quantity,price:e.unit_price,total:e.total_price})),status:e.status||"pending",paymentStatus:e.payment_status||"pending",shippingAddress:{id:e.shipping_address.addressLine1||"",userId:e.customer_id||"",firstName:e.shipping_address.firstName,lastName:e.shipping_address.lastName,company:e.shipping_address.company,addressLine1:e.shipping_address.addressLine1,addressLine2:e.shipping_address.addressLine2,city:e.shipping_address.city,state:e.shipping_address.state,postalCode:e.shipping_address.postalCode,country:e.shipping_address.country,phone:e.shipping_address.phone,isDefault:!1,type:"shipping"},billingAddress:{id:e.billing_address.addressLine1||"",userId:e.customer_id||"",firstName:e.billing_address.firstName,lastName:e.billing_address.lastName,company:e.billing_address.company,addressLine1:e.billing_address.addressLine1,addressLine2:e.billing_address.addressLine2,city:e.billing_address.city,state:e.billing_address.state,postalCode:e.billing_address.postalCode,country:e.billing_address.country,phone:e.billing_address.phone,isDefault:!1,type:"billing"},shippingMethod:e.shipping_method||"",paymentMethod:e.payment_method||"",subtotal:e.subtotal,shipping:e.shipping_cost,tax:e.tax_amount,discount:e.discount_amount,total:e.total,trackingNumber:e.tracking_number||void 0,notes:e.notes||void 0,createdAt:e.created_at,updatedAt:e.updated_at}),i=async()=>(await r.Z.get(a.P.ORDERS.LIST)).data.data.map(n),c=async e=>n((await r.Z.get(a.P.ORDERS.DETAIL(e))).data.data),d=async e=>{try{let s=await r.Z.post(a.P.ORDERS.CREATE,e),t="data"in s.data?s.data.data:s.data;return n(t)}catch(e){throw console.error("[API] Error creating order:",e),console.error("[API] Error response:",e instanceof Error?e.message:String(e)),e}},l=async e=>n((await r.Z.post(a.P.ORDERS.CANCEL(e))).data.data)},6857:function(e,s,t){"use strict";t.d(s,{cn:function(){return a}});var r=t(1994);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.W)(s)}},3145:function(e,s,t){"use strict";t.d(s,{default:function(){return a.a}});var r=t(8461),a=t.n(r)},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},8461:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{default:function(){return d},getImageProps:function(){return c}});let r=t(7043),a=t(5346),n=t(5878),i=r._(t(5084));function c(e){let{props:s}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(s))void 0===t&&delete s[e];return{props:s}}let d=n.Image},1994:function(e,s,t){"use strict";function r(){for(var e,s,t=0,r="",a=arguments.length;t<a;t++)(e=arguments[t])&&(s=function e(s){var t,r,a="";if("string"==typeof s||"number"==typeof s)a+=s;else if("object"==typeof s){if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=e(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=s);return r}t.d(s,{W:function(){return r}})}},function(e){e.O(0,[9956,2972,5878,9064,9502,2971,2117,1744],function(){return e(e.s=6704)}),_N_E=e.O()}]);