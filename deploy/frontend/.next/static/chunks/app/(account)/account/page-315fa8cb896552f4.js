(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2929],{3166:function(e,s,t){Promise.resolve().then(t.bind(t,8465))},8465:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p},dynamic:function(){return h}});var a=t(7437),r=t(2265),n=t(7648),d=t(9376),i=t(7996),l=t(2709),c=t(3276),o=t(653),u=t(9693),m=t(6018);t(9064);let h="force-dynamic";function p(){(0,d.useRouter)();let{user:e,logout:s}=(0,o.t)(),[t,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[x,b]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([(0,u.AU)().catch(()=>[]),(0,m.cl)().catch(()=>[])]);h(e.slice(0,3)),g(s)}catch(e){console.error("Failed to load dashboard data:",e)}finally{b(!1)}})()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Z,{items:[{label:"Trang chủ",href:"/"},{label:"T\xe0i khoản",href:"/account"}],className:"mb-6"}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"mb-8 border-b border-gray-200 pb-6",children:[(0,a.jsxs)("h1",{className:"mb-2 text-2xl font-bold text-gray-900",children:["Ch\xe0o mừng trở lại, ",null==e?void 0:e.lastName," ",null==e?void 0:e.firstName,"!"]}),(0,a.jsx)("p",{className:"text-gray-600",children:null==e?void 0:e.email})]}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"rounded-full bg-purple-100 p-3",children:(0,a.jsx)(i.zFh,{className:"h-6 w-6 text-brand-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x?"...":t.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Đơn h\xe0ng gần đ\xe2y"})]})]}),(0,a.jsx)(n.default,{href:"/account/orders",className:"mt-4 block text-sm font-medium text-brand-purple-600 hover:text-brand-purple-700",children:"Xem tất cả đơn h\xe0ng →"})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"rounded-full bg-blue-100 p-3",children:(0,a.jsx)(i.i63,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x?"...":p.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Địa chỉ đ\xe3 lưu"})]})]}),(0,a.jsx)(n.default,{href:"/account/addresses",className:"mt-4 block text-sm font-medium text-brand-purple-600 hover:text-brand-purple-700",children:"Quản l\xfd địa chỉ →"})]}),(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,a.jsx)(i.fzv,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"1"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"T\xe0i khoản"})]})]}),(0,a.jsx)(n.default,{href:"/account/profile",className:"mt-4 block text-sm font-medium text-brand-purple-600 hover:text-brand-purple-700",children:"Cập nhật th\xf4ng tin →"})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Đơn h\xe0ng gần đ\xe2y"}),(0,a.jsx)(n.default,{href:"/account/orders",className:"text-sm font-medium text-brand-purple-600 hover:text-brand-purple-700",children:"Xem tất cả"})]}),x?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-brand-purple-600 border-t-transparent"})}):0===t.length?(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-8 text-center",children:[(0,a.jsx)(i.x8h,{className:"mx-auto mb-4 h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mb-4 text-gray-600",children:"Bạn chưa c\xf3 đơn h\xe0ng n\xe0o"}),(0,a.jsx)(l.Z,{href:"/products",children:"Bắt đầu mua sắm"})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)(n.default,{href:"/account/orders/".concat(e.id),className:"block rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:["Đơn h\xe0ng #",e.orderNumber]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString("vi-VN")})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e.total)}),(0,a.jsx)("span",{className:"mt-1 inline-block rounded-full px-2 py-1 text-xs font-semibold ".concat("delivered"===e.status?"bg-green-100 text-green-800":"shipped"===e.status?"bg-purple-100 text-purple-800":"processing"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:"delivered"===e.status?"Đ\xe3 giao":"shipped"===e.status?"Đ\xe3 gửi":"processing"===e.status?"Đang xử l\xfd":"Chờ xử l\xfd"})]})]})},e.id))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)(n.default,{href:"/account/profile",className:"flex items-center gap-4 rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:[(0,a.jsx)("div",{className:"rounded-full bg-purple-100 p-3",children:(0,a.jsx)(i.fzv,{className:"h-5 w-5 text-brand-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cập nhật th\xf4ng tin t\xe0i khoản"})]})]}),(0,a.jsxs)(n.default,{href:"/account/addresses",className:"flex items-center gap-4 rounded-lg border border-gray-200 bg-white p-4 transition-shadow hover:shadow-md",children:[(0,a.jsx)("div",{className:"rounded-full bg-blue-100 p-3",children:(0,a.jsx)(i.i63,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Địa chỉ"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Quản l\xfd địa chỉ giao h\xe0ng"})]})]})]})]})]})}},9693:function(e,s,t){"use strict";t.d(s,{AU:function(){return d},G7:function(){return i},LV:function(){return l},sl:function(){return c}});var a=t(3405),r=t(2780);let n=e=>({id:e.id,orderNumber:e.order_number,userId:e.customer_id||"",items:e.items.map(e=>({id:e.id,productId:e.product_id,productName:e.product_name,productImage:e.product_image_url||"/images/placeholder-image.svg",variantId:e.variant_info?String(e.variant_info.id||""):void 0,variantName:e.variant_info?String(e.variant_info.name||""):void 0,sku:e.product_sku||"",quantity:e.quantity,price:e.unit_price,total:e.total_price})),status:e.status||"pending",paymentStatus:e.payment_status||"pending",shippingAddress:{id:e.shipping_address.addressLine1||"",userId:e.customer_id||"",firstName:e.shipping_address.firstName,lastName:e.shipping_address.lastName,company:e.shipping_address.company,addressLine1:e.shipping_address.addressLine1,addressLine2:e.shipping_address.addressLine2,city:e.shipping_address.city,state:e.shipping_address.state,postalCode:e.shipping_address.postalCode,country:e.shipping_address.country,phone:e.shipping_address.phone,isDefault:!1,type:"shipping"},billingAddress:{id:e.billing_address.addressLine1||"",userId:e.customer_id||"",firstName:e.billing_address.firstName,lastName:e.billing_address.lastName,company:e.billing_address.company,addressLine1:e.billing_address.addressLine1,addressLine2:e.billing_address.addressLine2,city:e.billing_address.city,state:e.billing_address.state,postalCode:e.billing_address.postalCode,country:e.billing_address.country,phone:e.billing_address.phone,isDefault:!1,type:"billing"},shippingMethod:e.shipping_method||"",paymentMethod:e.payment_method||"",subtotal:e.subtotal,shipping:e.shipping_cost,tax:e.tax_amount,discount:e.discount_amount,total:e.total,trackingNumber:e.tracking_number||void 0,notes:e.notes||void 0,createdAt:e.created_at,updatedAt:e.updated_at}),d=async()=>(await a.Z.get(r.P.ORDERS.LIST)).data.data.map(n),i=async e=>n((await a.Z.get(r.P.ORDERS.DETAIL(e))).data.data),l=async e=>{try{let s=await a.Z.post(r.P.ORDERS.CREATE,e),t="data"in s.data?s.data.data:s.data;return n(t)}catch(e){throw console.error("[API] Error creating order:",e),console.error("[API] Error response:",e instanceof Error?e.message:String(e)),e}},c=async e=>n((await a.Z.post(r.P.ORDERS.CANCEL(e))).data.data)},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},1994:function(e,s,t){"use strict";function a(){for(var e,s,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(s=function e(s){var t,a,r="";if("string"==typeof s||"number"==typeof s)r+=s;else if("object"==typeof s){if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(a=e(s[t]))&&(r&&(r+=" "),r+=a)}else for(a in s)s[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=s);return a}t.d(s,{W:function(){return a}})}},function(e){e.O(0,[9956,2972,9064,9502,5883,653,7927,2971,2117,1744],function(){return e(e.s=3166)}),_N_E=e.O()}]);