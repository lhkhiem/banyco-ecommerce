(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4133],{7167:function(e,l,t){Promise.resolve().then(t.bind(t,8024))},8024:function(e,l,t){"use strict";t.d(l,{default:function(){return h}});var i=t(7437),a=t(2265),n=t(1093),r=t(8330),s=t(1393),o=t(8323),c=t(3276),d=t(2709),u=t(7996);let f=[{id:"0-200000",label:"Dưới 200.000₫"},{id:"200000-500000",label:"200.000₫ - 500.000₫"},{id:"500000-1000000",label:"500.000₫ - 1.000.000₫"},{id:"1000000+",label:"Tr\xean 1.000.000₫"}],v=[{id:"in-stock",label:"C\xf2n h\xe0ng"},{id:"out-of-stock",label:"Hết h\xe0ng"}],m=[{id:"on-sale",label:"Đang giảm gi\xe1"},{id:"new",label:"H\xe0ng mới về"},{id:"best-seller",label:"B\xe1n chạy"}];function h(e){let{categoryName:l,categorySlug:t,breadcrumbItems:h,initialProducts:g}=e,[b,p]=(0,a.useState)({}),[x,j]=(0,a.useState)("featured"),[w,N]=(0,a.useState)(""),[y,k]=(0,a.useState)(!1),C=(0,a.useMemo)(()=>{let e=new Map;return g.forEach(l=>{if(l.brand){let t=l.brand.toLowerCase();e.has(t)||e.set(t,l.brand)}}),Array.from(e.entries()).map(e=>{let[l,t]=e;return{id:l,label:t}})},[g]),P=(0,a.useMemo)(()=>[{id:"brand",title:"Thương hiệu",options:C},{id:"price",title:"Khoảng gi\xe1",options:f},{id:"availability",title:"T\xecnh trạng",options:v},{id:"special",title:"Ưu đ\xe3i đặc biệt",options:m}],[C]),S=(0,a.useMemo)(()=>g.filter(e=>!e.category||e.category===t),[g,t]),_=(0,a.useMemo)(()=>{var e,l,t,i;let a=[...S];if(w){let e=w.toLowerCase();a=a.filter(l=>{var t,i;let a=null!==(t=l.tags)&&void 0!==t?t:[];return l.name.toLowerCase().includes(e)||(null!==(i=l.brand)&&void 0!==i?i:"").toLowerCase().includes(e)||a.some(l=>l.toLowerCase().includes(e))})}return(null===(e=b.brand)||void 0===e?void 0:e.length)&&(a=a.filter(e=>{var l,t;let i=(null!==(t=e.brand)&&void 0!==t?t:"").toLowerCase();return null===(l=b.brand)||void 0===l?void 0:l.includes(i)})),(null===(l=b.price)||void 0===l?void 0:l.length)&&(a=a.filter(e=>{var l;let t=e.salePrice||e.price;return null===(l=b.price)||void 0===l?void 0:l.some(e=>"0-200000"===e?t<2e5:"200000-500000"===e?t>=2e5&&t<5e5:"500000-1000000"===e?t>=5e5&&t<1e6:"1000000+"===e&&t>=1e6)})),(null===(t=b.availability)||void 0===t?void 0:t.length)&&(a=a.filter(e=>{var l,t;return(null===(l=b.availability)||void 0===l?void 0:l.includes("in-stock"))?e.inStock:null===(t=b.availability)||void 0===t||!t.includes("out-of-stock")||!e.inStock})),(null===(i=b.special)||void 0===i?void 0:i.length)&&(a=a.filter(e=>{var l,t,i;return!!((null===(l=b.special)||void 0===l?void 0:l.includes("on-sale"))&&e.salePrice||(null===(t=b.special)||void 0===t?void 0:t.includes("new"))&&"New"===e.badge||(null===(i=b.special)||void 0===i?void 0:i.includes("best-seller"))&&"Best Seller"===e.badge)})),a},[S,w,b]),L=(0,a.useMemo)(()=>{let e=[..._];switch(x){case"newest":default:return e;case"price-asc":return e.sort((e,l)=>(e.salePrice||e.price)-(l.salePrice||l.price));case"price-desc":return e.sort((e,l)=>(l.salePrice||l.price)-(e.salePrice||e.price));case"name-asc":return e.sort((e,l)=>e.name.localeCompare(l.name));case"rating":return e.sort((e,l)=>l.rating-e.rating)}},[_,x]);return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,i.jsxs)("div",{className:"container-custom py-8",children:[(0,i.jsx)(c.Z,{items:h,className:"mb-6"}),(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:l}),(0,i.jsx)(o.Z,{value:w,onChange:N})]}),(0,i.jsx)("div",{className:"mb-4 lg:hidden",children:(0,i.jsxs)(d.Z,{variant:"outline",onClick:()=>k(!y),className:"w-full",children:[(0,i.jsx)(u.Ihx,{className:"mr-2"}),"Bộ lọc"," ",Object.values(b).flat().length>0&&"(".concat(Object.values(b).flat().length,")")]})}),(0,i.jsxs)("div",{className:"flex gap-8",children:[(0,i.jsx)("aside",{className:"".concat(y?"block":"hidden"," w-full lg:block lg:w-64 lg:flex-shrink-0"),children:(0,i.jsx)(r.Z,{filters:P,selectedFilters:b,onFilterChange:(e,l)=>{p(t=>({...t,[e]:l}))},onClearAll:()=>{p({}),N("")}})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(s.Z,{value:x,onChange:j,totalProducts:L.length})}),(0,i.jsx)(n.Z,{products:L})]})]})]})})}},3276:function(e,l,t){"use strict";t.d(l,{Z:function(){return n}});var i=t(7437),a=t(7648);function n(e){let{items:l,className:t=""}=e;return(0,i.jsx)("nav",{className:"flex ".concat(t),"aria-label":"Breadcrumb",children:(0,i.jsx)("ol",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-sm",children:l.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,i.jsx)("svg",{className:"mx-2 h-4 w-4 shrink-0 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href&&t<l.length-1?(0,i.jsx)(a.default,{href:e.href,className:"break-words text-gray-600 hover:text-brand-purple-600",children:e.label}):(0,i.jsx)("span",{className:"break-words font-medium text-gray-900",children:e.label})]},t))})})}},3145:function(e,l,t){"use strict";t.d(l,{default:function(){return a.a}});var i=t(8461),a=t.n(i)},8461:function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),function(e,l){for(var t in l)Object.defineProperty(e,t,{enumerable:!0,get:l[t]})}(l,{default:function(){return o},getImageProps:function(){return s}});let i=t(7043),a=t(5346),n=t(5878),r=i._(t(5084));function s(e){let{props:l}=(0,a.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(l))void 0===t&&delete l[e];return{props:l}}let o=n.Image}},function(e){e.O(0,[9956,2972,5878,9064,5883,806,7799,2971,2117,1744],function(){return e(e.s=7167)}),_N_E=e.O()}]);