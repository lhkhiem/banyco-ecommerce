(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2614],{2445:function(e,t,r){Promise.resolve().then(r.bind(r,1980))},1980:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var n=r(7437),i=r(2265),a=r(1093),c=r(8330),l=r(1393),o=r(8323),s=r(3276),u=r(2709),d=r(7996),p=r(9376),h=r(7355);let f=[{id:"0-200000",label:"Dưới 200.000₫"},{id:"200000-500000",label:"200.000₫ - 500.000₫"},{id:"500000-1000000",label:"500.000₫ - 1.000.000₫"},{id:"1000000-2500000",label:"1.000.000₫ - 2.500.000₫"},{id:"2500000-5000000",label:"2.500.000₫ - 5.000.000₫"},{id:"5000000+",label:"Tr\xean 5.000.000₫"}],b=[{id:"in-stock",label:"C\xf2n h\xe0ng"},{id:"out-of-stock",label:"Hết h\xe0ng"}],m=[{id:"on-sale",label:"Đang giảm gi\xe1"},{id:"new",label:"H\xe0ng mới về"},{id:"featured",label:"Nổi bật"},{id:"best-seller",label:"B\xe1n chạy"}],v=e=>{var t,r,n,i,a,c,l;let o;let s=null!==e.comparePrice&&void 0!==e.comparePrice&&e.comparePrice>e.price,u=s&&null!==(t=e.comparePrice)&&void 0!==t?t:e.price,d=s?e.price:void 0;e.isBestSeller?o="B\xe1n chạy":e.isFeatured&&(o="Nổi bật");let p=null!==(r=e.isVariant)&&void 0!==r&&r,h=null!==(n=e.baseProductId)&&void 0!==n?n:e.id,f=p?e.id:void 0;return{id:e.id,productId:h,variantId:f,slug:e.slug,name:e.name,price:u,salePrice:d,image:null!==(i=e.thumbnailUrl)&&void 0!==i?i:"/images/placeholder-product.jpg",rating:null!==(a=e.rating)&&void 0!==a?a:0,reviewCount:null!==(c=e.reviewCount)&&void 0!==c?c:0,badge:o,inStock:(null!==(l=e.stock)&&void 0!==l?l:0)>0}};function g(e){var t;let{initialProducts:r,initialMeta:g,categories:E,brands:S,initialState:T}=e,R=(0,p.useRouter)(),x=(0,p.usePathname)(),[A,y]=(0,i.useState)(r.map(v)),[D,C]=(0,i.useState)(g),[I,L]=(0,i.useState)(T.selectedFilters),[w,j]=(0,i.useState)(T.sortBy),[N,O]=(0,i.useState)(T.searchQuery),[P,_]=(0,i.useState)(T.page),[k,U]=(0,i.useState)(!1),[B,F]=(0,i.useState)(!1),G=null!==(t=g.pageSize)&&void 0!==t?t:24,M=(0,i.useRef)(!1),W=(0,i.useMemo)(()=>[{id:"category",title:"Danh mục",options:E.map(e=>{var t;return{id:e.slug,label:e.name,count:null!==(t=e.productCount)&&void 0!==t?t:void 0}})},{id:"brand",title:"Thương hiệu",options:S.map(e=>({id:e.slug,label:e.name}))},{id:"price",title:"Khoảng gi\xe1",options:f},{id:"availability",title:"T\xecnh trạng",options:b},{id:"special",title:"Ưu đ\xe3i đặc biệt",options:m}],[S,E]),H=(0,i.useCallback)(async()=>{U(!0);try{var e,t,r,n,i;let a=await (0,h.t)({page:P,pageSize:G,q:N,sort:w,category:null===(e=I.category)||void 0===e?void 0:e.join(","),brand:null===(t=I.brand)||void 0===t?void 0:t.join(","),price:null===(r=I.price)||void 0===r?void 0:r.join(","),availability:null===(n=I.availability)||void 0===n?void 0:n.join(","),special:null===(i=I.special)||void 0===i?void 0:i.join(",")});y(a.data.map(v)),C(a.meta)}catch(e){console.error("[ProductsPageClient] loadProducts failed",e),y([]),C({total:0,page:1,pageSize:G,totalPages:0})}finally{U(!1)}},[P,G,N,w,I]);(0,i.useEffect)(()=>{if(!M.current){M.current=!0;return}H()},[H]),(0,i.useEffect)(()=>{let e=new URLSearchParams;N&&e.set("q",N),w&&"featured"!==w&&e.set("sort",w),Object.entries(I).forEach(t=>{let[r,n]=t;n.length>0&&e.set(r,n.join(","))}),P>1&&e.set("page",String(P));let t=e.toString(),r=t?"".concat(x,"?").concat(t):x;R.replace(r,{scroll:!1})},[x,R,N,w,I,P]);let V=(0,i.useMemo)(()=>[{label:"Trang chủ",href:"/"},{label:"Sản phẩm"}],[]);return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,n.jsxs)("div",{className:"container-custom py-8",children:[(0,n.jsx)(s.Z,{items:V,className:"mb-6"}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"mb-4 text-3xl font-bold text-gray-900",children:"Tất cả sản phẩm"}),(0,n.jsx)(o.Z,{value:N,onChange:e=>{O(e),_(1)}})]}),(0,n.jsx)("div",{className:"mb-4 lg:hidden",children:(0,n.jsxs)(u.Z,{variant:"outline",onClick:()=>F(!B),className:"w-full",children:[(0,n.jsx)(d.Ihx,{className:"mr-2"}),"Bộ lọc"," ",Object.values(I).flat().length>0&&"(".concat(Object.values(I).flat().length,")")]})}),(0,n.jsxs)("div",{className:"flex gap-8",children:[(0,n.jsx)("aside",{className:"".concat(B?"block":"hidden"," w-full lg:block lg:w-64 lg:flex-shrink-0"),children:(0,n.jsx)(c.Z,{filters:W,selectedFilters:I,onFilterChange:(e,t)=>{L(r=>({...r,[e]:t})),_(1)},onClearAll:()=>{L({}),O(""),j("featured"),_(1)}})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(l.Z,{value:w,onChange:e=>{j(e),_(1)},totalProducts:D.total})}),(0,n.jsx)(a.Z,{products:A,loading:k})]})]})]})})}},3276:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7437),i=r(7648);function a(e){let{items:t,className:r=""}=e;return(0,n.jsx)("nav",{className:"flex ".concat(r),"aria-label":"Breadcrumb",children:(0,n.jsx)("ol",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-sm",children:t.map((e,r)=>(0,n.jsxs)("li",{className:"flex items-center",children:[r>0&&(0,n.jsx)("svg",{className:"mx-2 h-4 w-4 shrink-0 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.href&&r<t.length-1?(0,n.jsx)(i.default,{href:e.href,className:"break-words text-gray-600 hover:text-brand-purple-600",children:e.label}):(0,n.jsx)("span",{className:"break-words font-medium text-gray-900",children:e.label})]},r))})})}},1971:function(e,t,r){"use strict";r.d(t,{f8:function(){return d},kG:function(){return s},uD:function(){return p}}),r(257);let n="/api",i=e=>e?e.replace(/\/+$/,""):"",a=e=>e?e.startsWith("/")?e:"/".concat(e):"",c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=i(e);return t?"".concat(r).concat(a(t)):r},l=()=>{let e=i("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:c(e,n);let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t).concat(n)}{let{protocol:e,hostname:t}=window.location;return c("".concat(e,"//").concat(t).concat(":".concat("443")),n)}},o=e=>i(e).replace(/\/api$/,""),s=()=>l(),u=()=>o(l()),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c(l(),e)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c(u(),e)}},2780:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});let n={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",VERIFY_EMAIL:"/auth/verify-email",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",ME:"/auth/me"},PRODUCTS:{LIST:"/products",DETAIL:e=>"/products/".concat(e),SEARCH:"/products/search",FEATURED:"/products/featured",BEST_SELLERS:"/products/best-sellers",NEW_ARRIVALS:"/products/new-arrivals",RELATED:e=>"/products/".concat(e,"/related"),REVIEWS:e=>"/products/".concat(e,"/reviews")},CATEGORIES:{LIST:"/product-categories",DETAIL:e=>"/product-categories/slug/".concat(e),TREE:"/product-categories/tree",PRODUCTS:e=>"/product-categories/".concat(e,"/products")},BRANDS:{LIST:"/brands",DETAIL:e=>"/brands/slug/".concat(e),PRODUCTS:e=>"/brands/".concat(e,"/products")},CART:{GET:"/public/cart",ADD:"/public/cart/add",UPDATE:"/public/cart/update",REMOVE:"/public/cart/remove",CLEAR:"/public/cart/clear",APPLY_PROMO:"/public/cart/promo"},ORDERS:{LIST:"/public/orders",DETAIL:e=>"/public/orders/".concat(e),CREATE:"/orders",CANCEL:e=>"/public/orders/".concat(e,"/cancel")},USER:{PROFILE:"/public/user/profile",UPDATE_PROFILE:"/public/user/profile",ADDRESSES:"/public/user/addresses",ADD_ADDRESS:"/public/user/addresses",UPDATE_ADDRESS:e=>"/public/user/addresses/".concat(e),DELETE_ADDRESS:e=>"/public/user/addresses/".concat(e),WISHLIST:"/public/user/wishlist",ADD_TO_WISHLIST:"/public/user/wishlist/add",REMOVE_FROM_WISHLIST:"/public/user/wishlist/remove"},SEARCH:{PRODUCTS:"/search/products",SUGGESTIONS:"/search/suggestions"},NEWSLETTER:{SUBSCRIBE:"/newsletter/subscribe"},CONTACTS:{SUBMIT:"/contacts"},ANALYTICS:{TRACK:"/analytics/track"},POSTS:{LIST:"/public/posts",DETAIL:e=>"/public/posts/".concat(e),RELATED:e=>"/public/posts/".concat(e,"/related")},ABOUT:{SECTIONS:"/about-sections",SECTION_BY_KEY:e=>"/about-sections/key/".concat(e)},TRACKING:{ACTIVE_SCRIPTS:"/tracking-scripts/active"}}},257:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(e){r=c}}();var o=[],s=!1,u=-1;function d(){s&&n&&(s=!1,n.length?o=n.concat(o):u=-1,o.length&&p())}function p(){if(!s){var e=l(d);s=!0;for(var t=o.length;t;){for(n=o,o=[];++u<t;)n&&n[u].run();u=-1,t=o.length}n=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new h(e,t)),1!==o.length||s||l(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var a=r[e]={exports:{}},c=!0;try{t[e](a,a.exports,n),c=!1}finally{c&&delete r[e]}return a.exports}n.ab="//";var i=n(229);e.exports=i}()}},function(e){e.O(0,[9956,2972,5878,9064,5883,806,1622,7799,2971,2117,1744],function(){return e(e.s=2445)}),_N_E=e.O()}]);