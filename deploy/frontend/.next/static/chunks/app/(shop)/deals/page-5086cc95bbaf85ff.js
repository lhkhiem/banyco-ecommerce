(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2668],{3294:function(e,t,r){Promise.resolve().then(r.bind(r,585)),Promise.resolve().then(r.bind(r,3184)),Promise.resolve().then(r.bind(r,7210)),Promise.resolve().then(r.bind(r,4226)),Promise.resolve().then(r.t.bind(r,5878,23)),Promise.resolve().then(r.t.bind(r,2972,23))},585:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7437),i=r(2265),o=r(9064),a=r(3464),s=r(1971),u=r(4025),c=r(6021);function l(e){let{source:t="website",className:r="",inputClassName:l="",buttonClassName:d="",placeholder:f="Nhập email của bạn",buttonText:p="Đăng K\xfd",onSuccess:m}=e,[h,g]=(0,i.useState)(""),[v,y]=(0,i.useState)(!1),b=(0,i.useRef)(null),w=(0,i.useRef)(null),x=(0,i.useRef)(null),j=(0,u.gH)();(0,i.useEffect)(()=>{if(w.current){let e=w.current.getBoundingClientRect();document.elementFromPoint(e.left+e.width/2,e.top+e.height/2)}let e=()=>{x.current||(x.current=(0,u.A9)())},t=b.current;return t&&(t.addEventListener("focusin",e,{once:!0}),t.addEventListener("input",e,{once:!0})),()=>{t&&(t.removeEventListener("focusin",e),t.removeEventListener("input",e))}},[]);let I=async e=>{if(e.preventDefault(),e.stopPropagation(),!h.trim()){o.ZP.error("Vui l\xf2ng nhập email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.trim())){o.ZP.error("Email kh\xf4ng hợp lệ");return}y(!0);try{let e=(0,s.kG)().replace(/\/api\/?$/,""),r={email:h.trim(),source:t};if(r[j.name]="",x.current&&(r._formStartTime=x.current.toString()),(0,c.QV)())try{let e=await (0,c.jv)("newsletter_subscribe");e&&(r.recaptchaToken=e)}catch(e){console.error("[NewsletterForm] reCAPTCHA error:",e)}let n=await a.Z.post("".concat(e,"/api/newsletter/subscribe"),r,{headers:{"Content-Type":"application/json"},timeout:1e4});n.data.success?(o.ZP.success(n.data.message||"Đăng k\xfd nhận bản tin th\xe0nh c\xf4ng!"),g(""),null==m||m()):o.ZP.error(n.data.error||"Đăng k\xfd thất bại")}catch(t){var r,n,i,u,l,d;console.error("[NewsletterForm] Error:",t),console.error("[NewsletterForm] Error response:",null===(r=t.response)||void 0===r?void 0:r.data),console.error("[NewsletterForm] Error status:",null===(n=t.response)||void 0===n?void 0:n.status);let e=(null===(u=t.response)||void 0===u?void 0:null===(i=u.data)||void 0===i?void 0:i.error)||(null===(d=t.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message)||t.message||"Đăng k\xfd thất bại. Vui l\xf2ng thử lại sau.";o.ZP.error(e)}finally{y(!1)}};return(0,n.jsxs)("form",{ref:b,onSubmit:e=>{I(e)},className:r,style:{display:"flex",flexDirection:"row",position:"relative",zIndex:10,isolation:"isolate",width:"100%"},onClick:e=>{},children:[(0,n.jsx)("input",{...j}),(0,n.jsx)("input",{type:"email",value:h,onChange:e=>{g(e.target.value)},placeholder:f,disabled:v,className:l,required:!0,style:{flex:"1 1 auto",minWidth:0,position:"relative",zIndex:1},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),I(e))},onClick:e=>{}}),(0,n.jsx)("button",{ref:w,type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),I({preventDefault:()=>{},stopPropagation:()=>{}})},disabled:v,className:d,style:{cursor:v?"not-allowed":"pointer",position:"relative",zIndex:10,pointerEvents:"auto",userSelect:"none",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",flexShrink:0},onMouseDown:e=>{},onMouseUp:e=>{},onTouchStart:e=>{},children:v?"Đang xử l\xfd...":p})]})}},3184:function(e,t,r){"use strict";r.d(t,{default:function(){return c}});var n=r(7437),i=r(2265),o=r(9064),a=r(7996),s=r(2709),u=r(2154);function c(e){let{productId:t,variantId:r,name:c,price:l,image:d,quantity:f=1,disabled:p=!1,variant:m="primary",size:h="md",fullWidth:g=!1,showIcon:v=!0}=e,[y,b]=(0,i.useState)(!1),w=(0,u.x)(e=>e.addItem),x=async()=>{b(!0);try{w({productId:t,variantId:r,quantity:f,price:l,name:c,image:null!=d?d:"/images/placeholder-product.jpg"}),o.Am.success("Đ\xe3 th\xeam v\xe0o giỏ h\xe0ng",{duration:2500,position:"top-right",icon:"\uD83D\uDED2",style:{minWidth:"220px"}})}catch(e){console.error("Failed to add to cart:",e),o.Am.error("Kh\xf4ng thể th\xeam sản phẩm v\xe0o giỏ h\xe0ng. Vui l\xf2ng thử lại.")}finally{b(!1)}};return(0,n.jsxs)(s.Z,{variant:m,size:h,fullWidth:g,isLoading:y,disabled:p,onClick:x,className:"flex items-center justify-center",children:[!y&&v&&(0,n.jsx)(a.Qyq,{className:"mr-2 h-4 w-4"}),y?"Đang th\xeam...":"Th\xeam v\xe0o giỏ h\xe0ng"]})}},2709:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(7437),i=r(7648),o=r(6857);function a(e){let{children:t,variant:r="primary",size:a="md",isLoading:s=!1,fullWidth:u=!1,className:c,disabled:l,href:d,...f}=e,p=(0,o.cn)("btn",{primary:"btn-primary",secondary:"btn-secondary",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-brand-purple-600 hover:bg-brand-purple-50 focus:ring-brand-purple-500",danger:"bg-error text-white hover:bg-[#98131b] focus:ring-error"}[r],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[a],u&&"w-full",(l||s)&&"opacity-50 cursor-not-allowed",c),m=s?(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tải..."]}):t;return d?(0,n.jsx)(i.default,{href:d,legacyBehavior:!0,passHref:!0,children:(0,n.jsx)("a",{className:p,children:m})}):(0,n.jsx)("button",{className:p,disabled:l||s,...f,children:m})}},7210:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var n=r(7437),i=r(2265);function o(e){let{children:t,delay:r=0,direction:o="up",className:a=""}=e,[s,u]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&setTimeout(()=>{u(!0)},r)},{threshold:.1,rootMargin:"50px"});return c.current&&e.observe(c.current),()=>{c.current&&e.unobserve(c.current)}},[r]),(0,n.jsx)("div",{ref:c,className:a,style:{opacity:s?1:0,transform:(()=>{if(s)return"translate(0, 0)";switch(o){case"up":default:return"translate(0, 40px)";case"down":return"translate(0, -40px)";case"left":return"translate(40px, 0)";case"right":return"translate(-40px, 0)"}})(),transition:"opacity 0.8s ease-out, transform 0.8s ease-out",willChange:s?"auto":"opacity, transform"},children:t})}},4226:function(e,t,r){"use strict";r.d(t,{default:function(){return a}});var n=r(7437),i=r(2265),o=r(3145);function a(e){let{src:t,alt:r,fill:a,width:s,height:u,className:c="",priority:l,sizes:d,fallbackSrc:f="/images/placeholder-product.jpg"}=e,[p,m]=(0,i.useState)(!1),h=p||!t?f:t,g=d||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";return a?(0,n.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,n.jsx)(o.default,{src:h,alt:r,fill:!0,className:c,priority:l,sizes:g,unoptimized:!1,onError:()=>{p||m(!0)}})}):(0,n.jsx)(o.default,{src:h,alt:r,width:s,height:u,className:c,priority:l,sizes:g,unoptimized:!1,onError:()=>{p||m(!0)}})}},1971:function(e,t,r){"use strict";r.d(t,{f8:function(){return d},kG:function(){return c},uD:function(){return f}}),r(257);let n="/api",i=e=>e?e.replace(/\/+$/,""):"",o=e=>e?e.startsWith("/")?e:"/".concat(e):"",a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=i(e);return t?"".concat(r).concat(o(t)):r},s=()=>{let e=i("https://ecommerce-api.banyco.vn/api");if(e)return e.endsWith("/api")?e:a(e,n);let t="ecommerce-api.banyco.vn";if(t){let e=window.location.protocol;return"".concat(e,"//").concat(t).concat(n)}{let{protocol:e,hostname:t}=window.location;return a("".concat(e,"//").concat(t).concat(":".concat("443")),n)}},u=e=>i(e).replace(/\/api$/,""),c=()=>s(),l=()=>u(s()),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a(s(),e)},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a(l(),e)}},2154:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(9625),i=r(6885);let o=(0,n.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>e(e=>{if(t.quantity<=0)return e;let r=e.items.findIndex(e=>e.productId===t.productId&&e.variantId===t.variantId);if(r>-1){let n=[...e.items];return n[r].quantity+=t.quantity,{items:n}}return{items:[...e.items,t]}}),removeItem:(t,r)=>e(e=>({items:e.items.filter(e=>!(e.productId===t&&e.variantId===r))})),updateQuantity:(t,r,n)=>e(e=>r<=0?{items:e.items.filter(e=>!(e.productId===t&&e.variantId===n))}:{items:e.items.map(e=>e.productId===t&&e.variantId===n?{...e,quantity:r}:e)}),clearCart:()=>e({items:[]}),getTotalItems:()=>t().items.reduce((e,t)=>e+t.quantity,0),getSubtotal:()=>t().items.reduce((e,t)=>e+t.price*t.quantity,0),getTotalPrice:()=>t().getSubtotal()}),{name:"cart-storage"}))},4025:function(e,t,r){"use strict";function n(){return Date.now()}function i(){return{name:"website",type:"text",tabIndex:-1,autoComplete:"off",style:{position:"absolute",left:"-9999px",opacity:0,pointerEvents:"none",height:0,width:0,overflow:"hidden"},"aria-hidden":!0}}r.d(t,{A9:function(){return n},gH:function(){return i}})},6857:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(1994);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.W)(t)}},6021:function(e,t,r){"use strict";r.d(t,{QV:function(){return o},jv:function(){return a}});var n=r(257);function i(){return n.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY||""}function o(){return!!i()}async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit";if(!window.grecaptcha)return null;let t=i();if(!t)return null;try{return new Promise((r,n)=>{window.grecaptcha.ready(async()=>{try{let n=await window.grecaptcha.execute(t,{action:e});r(n)}catch(e){n(e)}})})}catch(e){return console.error("[ReCaptcha] Error executing:",e),null}}},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(8461),i=r.n(n)},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return u},getImageProps:function(){return s}});let n=r(7043),i=r(5346),o=r(5878),a=n._(r(5084));function s(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let u=o.Image},1994:function(e,t,r){"use strict";function n(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{W:function(){return n}})}},function(e){e.O(0,[9956,2972,5878,9064,9502,5883,2971,2117,1744],function(){return e(e.s=3294)}),_N_E=e.O()}]);